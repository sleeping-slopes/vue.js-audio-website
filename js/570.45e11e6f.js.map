{"version":3,"file":"js/570.45e11e6f.js","mappings":"yMACKA,MAAM,6B,GAEFA,MAAM,c,GACTC,EAAAA,EAAAA,GAA0C,SAAnCC,IAAI,mBAAkB,SAAK,G,SAI5BF,MAAM,gC,GACVC,EAAAA,EAAAA,GAAmD,QAA7CD,MAAM,iCAA+B,S,GAG/CC,EAAAA,EAAAA,GAA2E,UAAnEE,KAAK,SAASH,MAAM,2BAA0B,gBAAY,G,GAEpEC,EAAAA,EAAAA,GAGM,OAHDD,MAAM,gBAAc,EACvBC,EAAAA,EAAAA,GAA0D,QAApDD,MAAM,gCAA+B,aAC3CC,EAAAA,EAAAA,GAAkF,UAA1ED,MAAM,2BAA0B,uCAAiC,G,0CAf7EI,EAAAA,EAAAA,IAkBM,MAlBNC,EAkBM,EAjBJJ,EAAAA,EAAAA,GAWO,QAXDD,MAAM,SAAUM,SAAMC,EAAA,KAAAA,EAAA,IAAAC,EAAAA,EAAAA,KAAA,IAAAC,IAAUC,EAAAC,aAAAD,EAAAC,eAAAF,IAAW,e,EAC/CR,EAAAA,EAAAA,GAQM,MARNW,EAQM,CAPJC,GAA0C,SAC1CZ,EAAAA,EAAAA,GAEE,SAFKa,GAAG,kBAAkBX,KAAK,OAAcH,OAAKe,EAAAA,EAAAA,IAAA,eAAkBC,EAAAC,MAAMC,QAAQC,YAAY,c,qCACrFH,EAAAC,MAAMG,KAAIC,I,eAAVL,EAAAC,MAAMG,QAE+BJ,EAAAC,MAAMC,QAAK,WAA3Dd,EAAAA,EAAAA,IAEO,OAFPkB,EAEO,CADLC,GAAmDtB,EAAAA,EAAAA,GAA8B,aAAAuB,EAAAA,EAAAA,IAArBR,EAAAC,MAAMC,OAAK,wBAG3EO,GAA2E,IAE7EC,GAIAzB,EAAAA,EAAAA,GAAyH,UAAjHD,MAAM,gCAAgC2B,MAAA,sBAA8BC,QAAKrB,EAAA,KAAAA,EAAA,OAAAE,IAAEC,EAAAmB,eAAAnB,EAAAmB,iBAAApB,KAAe,mB,yBAUpG,GAEEqB,KAAM,sBACNV,IAAAA,GAEE,MAAO,CACLH,MAAM,CAAEG,KAAMW,KAAKC,OAAOC,QAAQC,eAAejB,MAAOC,MAAO,MAEnE,EACAiB,QACA,CACE,iBAAMxB,GAYJ,GAVAoB,KAAKd,MAAMG,KAAOW,KAAKd,MAAMG,MAAQ,KACrCW,KAAKd,MAAMC,MAAM,KACba,KAAKd,MAAMG,MAEbW,KAAKd,MAAMG,KAAOW,KAAKd,MAAMG,KAAKgB,OAAOC,cACrCN,KAAKd,MAAMG,KAAKkB,OAAO,GAAIP,KAAKd,MAAMC,MAAM,+CACtCqB,EAAAA,EAAAA,IAAWR,KAAKd,MAAMG,QAAOW,KAAKd,MAAMC,MAAM,mBAErDa,KAAKd,MAAMC,MAAM,kBAElBa,KAAKd,MAAMC,MAAO,OAEtB,MAAMsB,QAAUC,EAAAA,EAAIC,IAAI,iBAAkB,CAAEzB,MAAMc,KAAKd,MAAMG,OACzDoB,EAAEtB,OAEAsB,EAAEtB,MAAMyB,QAAQC,aAAYb,KAAKd,MAAMC,MAAQsB,EAAEtB,MAAMyB,QAAQC,WAEvE,EACA,mBAAMf,SAEYY,EAAAA,EAAII,OAAO,MAQzBd,KAAKC,OAAOc,SAAS,SAEzB,I,QClEJ,MAAMC,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,KAEpE,O","sources":["webpack://vuejs-spa/./src/views/Settings/SettingsAccountView.vue","webpack://vuejs-spa/./src/views/Settings/SettingsAccountView.vue?68cb"],"sourcesContent":["<template>\r\n<div class=\"column gap-15 column-side\">\r\n  <form class=\"column\" @submit.prevent=\"changeEmail\">\r\n    <div class=\"form-field\">\r\n      <label for=\"input_userEmail\">Email</label>\r\n      <input id=\"input_userEmail\" type=\"text\" v-bind:class=\"{'input-error': email.error}\" placeholder=\"Enter email\"\r\n        v-model=\"email.data\"\r\n      />\r\n      <span class=\"icon-text notification-error\" v-if=email.error>\r\n        <span class=\"bi bi-exclamation-circle-fill\"></span><span>{{ email.error }}</span>\r\n      </span>\r\n    </div>\r\n    <button type=\"submit\" class=\"button button-secondary\">Change email</button>\r\n  </form>\r\n  <div class=\"column gap-5\">\r\n    <span class=\"primary-text font-size-small\">Password</span>\r\n    <button class=\"button button-secondary\">Send password-reset link to email</button>\r\n  </div>\r\n  <button class=\"button button-default toggled\" style=\"margin-top:90px;\" v-on:click=\"deleteAccount\">Delete account</button>\r\n</div>\r\n</template>\r\n\r\n<script>\r\n\r\nimport API from '@/axios/API';\r\n\r\nimport { validEmail } from \"@/functions.js\"\r\n\r\nexport default\r\n{\r\n  name: 'AccountSettingsView',\r\n  data()\r\n  {\r\n    return {\r\n      email:{ data: this.$store.getters.getCurrentUser.email, error: null },\r\n    }\r\n  },\r\n  methods:\r\n  {\r\n    async changeEmail()\r\n    {\r\n      this.email.data = this.email.data || null;\r\n      this.email.error=null;\r\n      if (this.email.data)\r\n      {\r\n        this.email.data = this.email.data.trim().toLowerCase();\r\n        if (this.email.data.length>50) this.email.error='Enter an email that is up to 50 characters.';\r\n        else if (!validEmail(this.email.data)) this.email.error='Invalid email.';\r\n      }\r\n      else this.email.error=\"Required field.\";\r\n\r\n      if (this.email.error) return;\r\n\r\n      const r = await API.put('me/credentials', { email:this.email.data });\r\n      if (r.error)\r\n      {\r\n        if (r.error.message.emailError) this.email.error = r.error.message.emailError;\r\n      }\r\n    },\r\n    async deleteAccount()\r\n    {\r\n      const r = await API.delete('me');\r\n      // if (r.error)\r\n      if (false)\r\n      {\r\n        alert (JSON.stringify(r.error));\r\n      }\r\n      else\r\n      {\r\n        this.$store.dispatch('logOut');\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n</script>\r\n\r\n\r\n","import { render } from \"./SettingsAccountView.vue?vue&type=template&id=023a6cd8\"\nimport script from \"./SettingsAccountView.vue?vue&type=script&lang=js\"\nexport * from \"./SettingsAccountView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","for","type","_createElementBlock","_hoisted_1","onSubmit","_cache","_withModifiers","args","$options","changeEmail","_hoisted_2","_hoisted_3","id","_normalizeClass","$data","email","error","placeholder","data","$event","_hoisted_4","_hoisted_5","_toDisplayString","_hoisted_6","_hoisted_7","style","onClick","deleteAccount","name","this","$store","getters","getCurrentUser","methods","trim","toLowerCase","length","validEmail","r","API","put","message","emailError","delete","dispatch","__exports__","render"],"sourceRoot":""}