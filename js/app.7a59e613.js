(function(){"use strict";var t={3278:function(t,e,s){var n=s(4161);const o=n.Z.create({baseURL:"https://young-beach-75928-2da5777b3d08.herokuapp.com/api/",timeout:1e4});o.interceptors.request.use((t=>(t.headers.authorization=localStorage.getItem("authJWT"),t)),(t=>{Promise.reject(t)})),o.interceptors.response.use((async t=>t.data.values),(async t=>t.response?{error:{status:t.response.data.status,message:t.response.data.values}}:{error:{status:503,message:"Network error"}})),e.Z=o},7285:function(t,e,s){function n(t){return String(Math.floor(t/60))+":"+String(Math.floor(t)%60).padStart(2,"0")}function o(t,e){if(!t||0===t)return"0";e=!e||e<0?0:e;var s=t.toPrecision(2).split("e"),n=1===s.length?0:Math.floor(Math.min(s[1].slice(1),14)/3),o=n<1?t.toFixed(0+e):(t/Math.pow(10,3*n)).toFixed(1+e),r=o<0?o:Math.abs(o),i=r+["","K","M","B","T"][n];return i}function r(t){const e=/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u00a1-\uffff][a-z0-9\u00a1-\uffff_-]{0,62})?[a-z0-9\u00a1-\uffff]\.)+(?:[a-z\u00a1-\uffff]{2,}\.?))(?::\d{2,5})?(?:[/?#]\S*)?$/i;return e.test(t)}function i(t){const e=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return e.test(t)}function a(t){const e=/^[a-zA-Z0-9_.-]*$/;return e.test(t)}s.d(e,{H4:function(){return n},b3:function(){return r},dY:function(){return a},dm:function(){return o},u$:function(){return i}})},8315:function(t,e,s){var n=s(9242),o=(s(7658),s(3396)),r=s(7139);const i=t=>((0,o.dD)("data-v-e05a1946"),t=t(),(0,o.Cn)(),t),a={class:"nav-header"},l={class:"nav-menu nav-main-menu"},u={class:"logo"},c=i((()=>(0,o._)("img",{src:"assets/logo.png"},null,-1))),d={class:"label-search dark-theme"},g=i((()=>(0,o._)("i",{class:"fa fa-search"},null,-1))),p={key:0,class:"nav-menu right gap-10"},h={key:1,class:"nav-menu right"},m={class:"button"},y={class:"icon-text gap-5"},f=["src"],b={key:1,class:"user-image s36x36 bi bi-person-fill"},w=i((()=>(0,o._)("span",{class:"font-size-small bi bi-caret-down-fill"},null,-1))),v=i((()=>(0,o._)("span",{class:"icon-text"},[(0,o._)("span",{class:"accent-text bi bi-person-fill"}),(0,o._)("span",null,"Profile")],-1))),_=i((()=>(0,o._)("span",{class:"icon-text"},[(0,o._)("span",{class:"accent-text bi bi-gear-fill"}),(0,o._)("span",null,"Settings")],-1))),k=i((()=>(0,o._)("span",{class:"icon-text"},[(0,o._)("span",{class:"accent-text bi bi-box-arrow-right"}),(0,o._)("span",null,"Sign out")],-1))),S=[k],x={id:"main"},P=i((()=>(0,o._)("div",{style:{"background-color":"var(--panel-background-color)",width:"100%"}},null,-1))),C={class:"player-wrapper"},$=i((()=>(0,o._)("div",{style:{"background-color":"var(--panel-background-color)",width:"100%"}},null,-1)));function D(t,e,s,i,k,D){const I=(0,o.up)("router-link"),U=(0,o.up)("contextMenuNav"),M=(0,o.up)("router-view"),z=(0,o.up)("player"),Z=(0,o.up)("playlistModal"),q=(0,o.up)("logInModal"),T=(0,o.up)("signUpModal");return void 0!==this.$store.getters.getCurrentUser?((0,o.wg)(),(0,o.iD)("div",{key:0,class:(0,r.C_)(["app",{"dark-theme":this.darkTheme}])},[(0,o._)("header",null,[(0,o._)("nav",a,[(0,o._)("ul",l,[(0,o._)("li",u,[(0,o.Wm)(I,{to:{name:"Discover"}},{default:(0,o.w5)((()=>[c])),_:1})]),(0,o._)("li",null,[(0,o.Wm)(I,{to:{name:"Discover"}},{default:(0,o.w5)((()=>[(0,o.Uk)("Discover")])),_:1})]),(0,o._)("li",null,[(0,o.Wm)(I,{to:{name:"Feed"}},{default:(0,o.w5)((()=>[(0,o.Uk)("Feed")])),_:1})]),(0,o._)("li",null,[(0,o.Wm)(I,{to:{name:"You"}},{default:(0,o.w5)((()=>[(0,o.Uk)("Library")])),_:1})])]),(0,o._)("form",{onSubmit:e[1]||(e[1]=(0,n.iM)((t=>this.search()),["prevent"])),style:{width:"400px"}},[(0,o._)("label",d,[(0,o.wy)((0,o._)("input",{id:"search",type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>this.searchQuery=t),placeholder:"Search music",autocomplete:"off"},null,512),[[n.nr,this.searchQuery]]),g])],32),this.$store.getters.getCurrentUser?((0,o.wg)(),(0,o.iD)("ul",h,[(0,o._)("li",null,[(0,o.Wm)(I,{to:{name:"Upload"}},{default:(0,o.w5)((()=>[(0,o.Uk)("Upload")])),_:1})]),(0,o._)("li",null,[(0,o.Wm)(U,{style:{width:"64px"}},{header:(0,o.w5)((()=>[(0,o._)("button",m,[(0,o._)("span",y,[(0,o._)("div",null,[this.$store.getters.getCurrentUser.profile_picture?((0,o.wg)(),(0,o.iD)("img",{key:0,class:"user-image s36x36",src:this.$store.getters.getCurrentUser.picturesrc},null,8,f)):((0,o.wg)(),(0,o.iD)("div",b))]),w])])])),options:(0,o.w5)((()=>[(0,o._)("li",null,[(0,o.Wm)(I,{to:{name:"User",params:{login:this.$store.getters.getCurrentUser.login}},class:"button"},{default:(0,o.w5)((()=>[v])),_:1},8,["to"])]),(0,o._)("li",null,[(0,o.Wm)(I,{to:{name:"Settings"},class:"button"},{default:(0,o.w5)((()=>[_])),_:1})]),(0,o._)("li",null,[(0,o._)("button",{onClick:e[4]||(e[4]=t=>{this.$store.dispatch("logOut")}),class:"button"},S)])])),_:1})]),(0,o._)("li",null,[(0,o.Wm)(I,{to:{name:"Notifications"},class:"bi bi-bell-fill"})]),(0,o._)("li",null,[(0,o.Wm)(I,{to:{name:"Messages"},class:"bi bi-envelope-fill"})])])):((0,o.wg)(),(0,o.iD)("ul",p,[(0,o._)("li",null,[(0,o._)("button",{onClick:e[2]||(e[2]=e=>t.$router.push({path:t.$route.fullPath,query:{action:"signup"}})),class:"button button-secondary dark-theme"},"Sign up")]),(0,o._)("li",null,[(0,o._)("button",{onClick:e[3]||(e[3]=e=>t.$router.push({path:t.$route.fullPath,query:{action:"login"}})),class:"button button-primary hoverable"},"Log in")])]))])]),(0,o._)("main",x,[((0,o.wg)(),(0,o.j4)(M,{key:JSON.stringify(this.$route.params)}))]),(0,o._)("footer",null,[P,(0,o._)("div",C,[(0,o.Wm)(z)]),$]),this.$route.query.playlist?((0,o.wg)(),(0,o.j4)(Z,{key:0,id:this.$route.query.playlist},null,8,["id"])):(0,o.kq)("",!0),"login"==this.$route.query.action?((0,o.wg)(),(0,o.j4)(q,{key:1})):(0,o.kq)("",!0),"signup"==this.$route.query.action?((0,o.wg)(),(0,o.j4)(T,{key:2})):(0,o.kq)("",!0)],2)):(0,o.kq)("",!0)}var I=s(3278);const U={class:"context-options"};function M(t,e,s,n,i,a){return(0,o.wg)(),(0,o.iD)("div",{class:(0,r.C_)(["context-menu-nav",{"context-active":this.active}])},[(0,o._)("div",{class:"context-header",ref:"header",onClick:e[0]||(e[0]=t=>this.active=!this.active)},[(0,o.WI)(t.$slots,"header",{},void 0,!0)],512),(0,o._)("ul",U,[(0,o.WI)(t.$slots,"options",{},void 0,!0)])],2)}var z={name:"contextMenuNav",data(){return{active:!1}},mounted(){document.addEventListener("click",this.close)},beforeUnmount(){document.removeEventListener("click",this.close)},methods:{close(t){this.$refs.header.contains(t.target)||(this.active=!1)}}},Z=s(89);const q=(0,Z.Z)(z,[["render",M],["__scopeId","data-v-0ebc073e"]]);var T=q;const L=["volume"],N={key:0,class:"player"},W={class:"player-menu"},j={class:"player-slider"},E={class:"song-time font-size-small"},O={class:"song-time font-size-small"},H={class:"row gap-20"},R={class:"popup-wrapper"},B={class:"player-menu"},J={style:{width:"280px",position:"relative"}},V={class:"popup-wrapper"},A={class:"player-menu"};function Y(t,e,s,n,i,a){const l=(0,o.up)("slider"),u=(0,o.up)("panel"),c=(0,o.up)("songItem"),d=(0,o.up)("songContainer");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("audio",{ref:"audio",onTimeupdate:e[0]||(e[0]=t=>this.currentTime=t.target.currentTime),onEnded:e[1]||(e[1]=t=>this.$store.dispatch("playNextSong")),volume:this.$store.state.volume,preload:"none"},null,40,L),null!=this.currentSongID?((0,o.wg)(),(0,o.iD)("div",N,[(0,o._)("div",W,[(0,o._)("button",{class:"button button-default button-small bi bi-skip-start-fill",onClick:e[2]||(e[2]=t=>this.$store.dispatch("shiftCurrentSong",-1))}),(0,o._)("button",{class:(0,r.C_)(["button button-default button-small",this.$store.state.isPlaying?"bi bi-pause-fill":"bi bi-play-fill"]),onClick:e[3]||(e[3]=t=>{this.$store.dispatch("togglePlayingState")})},null,2),(0,o._)("button",{class:"button button-default button-small bi bi-skip-end-fill",onClick:e[4]||(e[4]=t=>this.$store.dispatch("shiftCurrentSong",1))}),(0,o._)("button",{class:(0,r.C_)(["button button-default button-small bi bi-shuffle",{toggled:this.$store.state.shuffle}]),onClick:e[5]||(e[5]=t=>this.$store.dispatch("shuffle"))},null,2),(0,o._)("button",{class:(0,r.C_)(["button button-default button-small",{"bi bi-repeat":0==this.$store.state.repeatMode,"bi bi-repeat toggled":1==this.$store.state.repeatMode,"bi bi-repeat-1 toggled":2==this.$store.state.repeatMode}]),onClick:e[6]||(e[6]=t=>this.$store.dispatch("toggleRepeatMode"))},null,2)]),(0,o._)("div",j,[(0,o._)("span",E,(0,r.zw)(a.numberToTimeString(this.currentTime)),1),(0,o.Wm)(l,{style:{width:"100%"},"min-value":0,value:i.currentTime,"max-value":this.$refs.audio.duration||this.$store.getters.getSong(this.currentSongID).duration,onChangeProgress:a.setProgress},null,8,["value","max-value","onChangeProgress"]),(0,o._)("span",O,(0,r.zw)(a.numberToTimeString(this.$refs.audio.duration||this.$store.getters.getSong(this.currentSongID).duration)),1)]),(0,o._)("div",H,[(0,o._)("div",R,[(0,o._)("div",B,[(0,o._)("button",{class:(0,r.C_)(["button button-default button-small",{"bi bi-volume-up-fill":this.$store.state.volume>=.5,"bi bi-volume-down-fill":this.$store.state.volume>0&&this.$store.state.volume<.5,"bi bi-volume-mute-fill":0==this.$store.state.volume,toggled:this.showVolume}]),onClick:e[7]||(e[7]=t=>this.showVolume=!this.showVolume)},null,2)]),(0,o.Wm)(u,{class:(0,r.C_)(["popup volume-popup",this.showVolume?"visible":"hidden"]),style:{"padding-bottom":"10px","padding-top":"10px"}},{content:(0,o.w5)((()=>[(0,o.Wm)(l,{style:{height:"100px"},vertical:!0,"min-value":0,value:this.$store.state.volume,"max-value":1,onChangeProgress:a.setVolume},null,8,["value","onChangeProgress"])])),_:1},8,["class"])]),(0,o._)("div",J,[((0,o.wg)(),(0,o.j4)(c,{ref:"song",id:this.currentSongID,key:this.currentSongID},null,8,["id"]))]),(0,o._)("div",V,[(0,o._)("div",A,[(0,o._)("button",{class:(0,r.C_)(["button button-default button-small bi bi-suit-heart-fill",{toggled:this.liked}]),onClick:e[8]||(e[8]=(...t)=>a.likeCurrentSong&&a.likeCurrentSong(...t))},null,2),(0,o._)("button",{class:(0,r.C_)(["button button-default button-small bi bi-music-note-list",{toggled:this.showCurrentPlaylist}]),onClick:e[9]||(e[9]=t=>this.showCurrentPlaylist=!this.showCurrentPlaylist)},null,2)]),(0,o.Wm)(u,{class:(0,r.C_)(["popup current-playlist-popup",this.showCurrentPlaylist?"visible":"hidden"])},{header:(0,o.w5)((()=>[(0,o.Uk)("Current playlist")])),menu:(0,o.w5)((()=>[(0,o._)("button",{class:"button button-secondary",onClick:e[10]||(e[10]=t=>this.$store.dispatch("clearCurrentPlaylist"))}," Clear "),(0,o._)("button",{class:"button button-default button-small bi bi-x-lg",onClick:e[11]||(e[11]=t=>this.showCurrentPlaylist=!this.showCurrentPlaylist)})])),content:(0,o.w5)((()=>[((0,o.wg)(),(0,o.j4)(d,{type:"ul-list scroll-hidden",playlist:this.$store.state.currentPlaylist,key:[this.$store.state.currentPlaylist.id,this.$store.state.currentPlaylist.edited].toString()},null,8,["playlist"]))])),_:1},8,["class"])])])])):(0,o.kq)("",!0)],64)}var F=s(1417);function K(t,e,s,i,a,l){return(0,o.wg)(),(0,o.iD)("div",{class:(0,r.C_)(["slider-wrapper",{dragging:this.dragging,vertical:this.vertical,horizontal:!this.vertical}]),onMousedown:e[0]||(e[0]=(0,n.iM)(((...t)=>l.mouseDownSlider&&l.mouseDownSlider(...t)),["stop"]))},[(0,o._)("div",{class:(0,r.C_)(["progress-bg",{"x-center-absolute":this.vertical,"y-center-absolute":!this.vertical}])},null,2),(0,o._)("div",{class:(0,r.C_)(["progress",{"x-center-absolute":this.vertical,"y-center-absolute":!this.vertical}]),style:(0,r.j5)(this.progressStyle)},null,6),(0,o._)("div",{class:"slider-handle",style:(0,r.j5)(this.handlerStyle)},null,4)],34)}var Q={name:"slider",props:{vertical:{default:!1},minValue:{default:0},value:{default:50},maxValue:{default:100}},data(){return{dragging:!1,dragProgress:0}},computed:{progressStyle(){return this.vertical?"height:"+100*(this.dragging?this.dragProgress:this.progress)+"%":"width:"+100*(this.dragging?this.dragProgress:this.progress)+"%"},handlerStyle(){return this.vertical?"bottom:"+100*(this.dragging?this.dragProgress:this.progress)+"%":"left:"+100*(this.dragging?this.dragProgress:this.progress)+"%"},progress(){return this.minValue>=this.maxValue||this.value<this.minValue||this.value>this.maxValue?0:this.value/(this.maxValue-this.minValue)}},methods:{mouseDownSlider(t){t.stopPropagation(),t.preventDefault(),t.cancelBubble=!0,t.returnValue=!1;const e=this.$el.getBoundingClientRect();this.vertical?this.dragProgress=1-Math.min(1,Math.max(0,(t.y-e.top)/e.height)):this.dragProgress=Math.min(1,Math.max(0,(t.x-e.left)/e.width)),this.dragging=!0},mouseMove(t){if(this.dragging){const e=this.$el.getBoundingClientRect();this.vertical?this.dragProgress=1-Math.min(1,Math.max(0,(t.y-e.top)/e.height)):this.dragProgress=Math.min(1,Math.max(0,(t.x-e.left)/e.width))}},mouseUp(t){if(this.dragging){const t=this.dragProgress*(this.maxValue-this.minValue)+this.minValue;this.$emit("changeProgress",t),this.dragging=!1}}},mounted(){document.addEventListener("mousemove",this.mouseMove),document.addEventListener("mouseup",this.mouseUp)},beforeUnmount(){document.removeEventListener("mousemove",this.mouseMove),document.removeEventListener("mouseup",this.mouseUp)}};const X=(0,Z.Z)(Q,[["render",K],["__scopeId","data-v-265c28e3"]]);var G=X,tt=s(3818),et=s(8157),st=s(7285),nt={name:"player",components:{panel:F.Z,slider:G,songContainer:tt.Z,songItem:et.Z},data(){return{currentSongID:null,currentTime:0,showCurrentPlaylist:!1,showVolume:!1}},computed:{liked(){return this.$store.getters.getSong(this.currentSongID).liked}},watch:{"$store.getters.getCurrentPlaylistSongPos"(t,e){t.edited&&e&&t.edited!=e.edited||(this.currentSongID=this.$store.getters.getCurrentSong,null!=this.currentSongID&&(this.$refs.audio.src=I.Z.defaults.baseURL+"songs/"+this.currentSongID+"/audio"))},"$store.state.isPlaying"(t){t?this.$refs.audio.play():this.$refs.audio.pause()}},methods:{setProgress(t){this.$refs.audio.currentTime=t,this.$store.state.isPlaying=!0},setVolume(t){this.$store.commit("setVolume",t)},likeCurrentSong(){this.$refs.song.like()},numberToTimeString:st.H4},async mounted(){this.currentSongID=this.$store.getters.getCurrentSong,null!=this.currentSongID&&(this.$refs.audio.src=I.Z.defaults.baseURL+"songs/"+this.currentSongID+"/audio")}};const ot=(0,Z.Z)(nt,[["render",Y],["__scopeId","data-v-52ed893c"]]);var rt=ot;const it=t=>((0,o.dD)("data-v-2ad3c14f"),t=t(),(0,o.Cn)(),t),at=it((()=>(0,o._)("span",{class:"bi bi-emoji-frown"},null,-1))),lt={class:"row gap-5"},ut={class:"cover-wrapper s160x160"},ct=["src"],dt={key:1,class:"cover bi bi-music-note-list"},gt=it((()=>(0,o._)("div",{class:"shade"},null,-1))),pt={class:"cover-menu"},ht={class:"info-wrapper gap-5"},mt={class:"primary-text font-size-large"},yt={class:"primary-text font-size-big"},ft=it((()=>(0,o._)("span",null,"by ",-1))),bt={key:1},wt={key:2},vt={class:"secondary-text font-size-small",style:{"margin-top":"10px"}},_t=it((()=>(0,o._)("span",{class:"bi bi-dot"},null,-1))),kt={class:"secondary-text font-size-small",style:{"margin-top":"10px"}},St={class:"row gap-5 bottom"},xt=it((()=>(0,o._)("span",{class:"bi bi-suit-heart-fill"},null,-1))),Pt=it((()=>(0,o._)("button",{class:"button button-secondary icon-text"},[(0,o._)("span",{class:"bi bi-music-note-list"}),(0,o._)("span",null,"Play next")],-1))),Ct=it((()=>(0,o._)("hr",null,null,-1))),$t={key:1,class:"loader-wrapper"},Dt=it((()=>(0,o._)("div",{class:"loader"},null,-1))),It=[Dt];function Ut(t,e,s,i,a,l){const u=(0,o.up)("errorMessage"),c=(0,o.up)("router-link"),d=(0,o.up)("songContainer"),g=(0,o.up)("modal");return(0,o.wg)(),(0,o.j4)(g,{width:"600px"},{content:(0,o.w5)((()=>[this.loaded?((0,o.wg)(),(0,o.iD)(o.HY,{key:0},[this.playlist.error?((0,o.wg)(),(0,o.j4)(u,{key:0},{errorIcon:(0,o.w5)((()=>[at])),status:(0,o.w5)((()=>[(0,o.Uk)((0,r.zw)(this.playlist.error.status),1)])),message:(0,o.w5)((()=>[(0,o.Uk)((0,r.zw)(this.playlist.error.message),1)])),_:1})):((0,o.wg)(),(0,o.iD)(o.HY,{key:1},[(0,o._)("div",lt,[(0,o._)("div",ut,[this.playlist.cover?((0,o.wg)(),(0,o.iD)("img",{key:0,class:"cover",src:this.playlist.coversrc},null,8,ct)):((0,o.wg)(),(0,o.iD)("div",dt)),gt,(0,o._)("div",pt,[(0,o._)("button",{class:(0,r.C_)(["button button-default button-large",this.isPlaying?"bi bi-pause-fill":"bi bi-play-fill"]),onClick:e[0]||(e[0]=(0,n.iM)((e=>t.playPlaylist()),["stop"]))},null,2)])]),(0,o._)("div",ht,[(0,o._)("h1",mt,(0,r.zw)(this.playlist.name),1),(0,o._)("div",yt,[ft,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(this.playlist.artists,((t,e)=>((0,o.wg)(),(0,o.iD)(o.HY,null,[t.login?((0,o.wg)(),(0,o.j4)(c,{key:0,to:{name:"User",params:{login:t.login}},class:"alink"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,r.zw)(t.name),1)])),_:2},1032,["to"])):((0,o.wg)(),(0,o.iD)("span",bt,(0,r.zw)(t.name),1)),e+1<this.playlist.artists.length?((0,o.wg)(),(0,o.iD)("span",wt,", ")):(0,o.kq)("",!0)],64)))),256))]),(0,o._)("span",vt,[(0,o.Uk)((0,r.zw)(t.abbreviateNumber(this.playlist.songList.songs?.length))+" song"+(0,r.zw)(1==this.playlist.songList.songs?.length?"":"s")+" ",1),_t,(0,o.Uk)(" "+(0,r.zw)(t.abbreviateNumber(this.playlist.likes_count))+" like"+(0,r.zw)(1==this.playlist.likes_count?"":"s"),1)]),(0,o._)("span",kt,[(0,o.Uk)(" Created by "),(0,o.Wm)(c,{to:{name:"User",params:{login:this.playlist.created_by}},class:"alink"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,r.zw)(this.playlist.created_by_username),1)])),_:1},8,["to"])]),(0,o._)("div",St,[(0,o._)("button",{class:(0,r.C_)(["button button-secondary icon-text",{toggled:this.playlist.liked}]),onClick:e[1]||(e[1]=(0,n.iM)((t=>this.like()),["stop"]))},[xt,(0,o._)("span",null,"Like"+(0,r.zw)(this.playlist.liked?"d":""),1)],2),Pt])])]),Ct,(0,o.Wm)(d,{type:"ul-list scroll-hidden",playlist:this.playlist.songList},null,8,["playlist"])],64))],64)):((0,o.wg)(),(0,o.iD)("div",$t,It))])),_:1})}var Mt=s(3342),zt=s(8065),Zt=s(5535),qt={name:"playlistModal",extends:Mt.Z,components:{modal:zt.Z,songContainer:tt.Z,errorMessage:Zt.Z}};const Tt=(0,Z.Z)(qt,[["render",Ut],["__scopeId","data-v-2ad3c14f"]]);var Lt=Tt;const Nt=(0,o._)("h1",{class:"primary-text font-size-large left right",style:{padding:"57px 0px 57px 0px"}},"Log in to 3V3R51NC3",-1),Wt={class:"form-field"},jt=(0,o._)("label",{for:"input_userLogin"},"Login or email",-1),Et={key:0,class:"icon-text notification-error"},Ot=(0,o._)("span",{class:"bi bi-exclamation-circle-fill"},null,-1),Ht={class:"form-field"},Rt=(0,o._)("label",{for:"input_userPassword"},"Password",-1),Bt={class:"row gap-5"},Jt=["type"],Vt={key:0,class:"icon-text notification-error"},At=(0,o._)("span",{class:"bi bi-exclamation-circle-fill"},null,-1),Yt={class:"form-checkbox"},Ft=(0,o._)("label",{for:"checkbox_staySignedIn"},"Stay signed in",-1),Kt=(0,o._)("button",{type:"submit",class:"button button-primary hoverable"},"Log in",-1),Qt=(0,o._)("hr",null,null,-1),Xt={class:"primary-text font-size-small left right"};function Gt(t,e,s,i,a,l){const u=(0,o.up)("modal");return(0,o.wg)(),(0,o.j4)(u,{width:"400px"},{content:(0,o.w5)((()=>[Nt,(0,o._)("form",{onSubmit:e[4]||(e[4]=(0,n.iM)(((...t)=>l.logIn&&l.logIn(...t)),["prevent"])),class:"column gap-10 y-center"},[(0,o._)("div",Wt,[jt,(0,o.wy)((0,o._)("input",{id:"input_userLogin",type:"text",class:(0,r.C_)({"input-error":a.login.error}),placeholder:"Enter login or email","onUpdate:modelValue":e[0]||(e[0]=t=>a.login.data=t)},null,2),[[n.nr,a.login.data]]),a.login.error?((0,o.wg)(),(0,o.iD)("span",Et,[Ot,(0,o._)("span",null,(0,r.zw)(a.login.error),1)])):(0,o.kq)("",!0)]),(0,o._)("div",Ht,[Rt,(0,o._)("div",Bt,[(0,o.wy)((0,o._)("input",{id:"input_userPassword",class:(0,r.C_)(["w-100",{"input-error":a.password.error}]),type:this.showPassword?"text":"password",placeholder:"Enter password","onUpdate:modelValue":e[1]||(e[1]=t=>a.password.data=t)},null,10,Jt),[[n.YZ,a.password.data]]),(0,o._)("button",{type:"button",class:(0,r.C_)(["button form-button",{"bi bi-eye-slash-fill":!a.showPassword,"bi bi-eye-fill":a.showPassword}]),onClick:e[2]||(e[2]=t=>this.showPassword=!this.showPassword)},null,2)]),a.password.error?((0,o.wg)(),(0,o.iD)("span",Vt,[At,(0,o._)("span",null,(0,r.zw)(a.password.error),1)])):(0,o.kq)("",!0)]),(0,o._)("div",Yt,[(0,o._)("button",{type:"button",class:(0,r.C_)(["button button-checkbox",{"bi bi-check-square":!a.staySignedIn,"bi bi-check-square-fill toggled":a.staySignedIn}]),id:"checkbox_staySignedIn",onClick:e[3]||(e[3]=t=>this.staySignedIn=!this.staySignedIn)},null,2),Ft]),Kt],32),Qt,(0,o._)("span",Xt,[(0,o.Uk)("Don't have an account? "),(0,o._)("button",{class:"button button-link",onClick:e[5]||(e[5]=t=>{this.$router.replace({query:{action:"signup",to:this.$route.query.to}})})},"Sign up")])])),_:1})}var te={name:"logInModal",components:{modal:zt.Z},data(){return{login:{data:null,error:null},password:{data:null,error:null},showPassword:!1,staySignedIn:!1}},created(){this.$store.getters.getCurrentUser&&(this.$route.query.to&&this.$router.hasRoute(this.$route.query.to)?this.$router.push({name:this.$route.query.to}):this.$router.replace({query:null}))},methods:{async logIn(){if(this.login.data=this.login.data||null,this.login.error=null,this.login.data?this.login.data=this.login.data.trim():this.login.error="Required field.",this.password.data=this.password.data||null,this.password.error=null,this.password.data||(this.password.error="Required field."),this.login.error||this.password.error)return;const t=await I.Z.post("auth/login",{login:this.login.data,password:this.password.data});t.error?(t.error.message.loginError&&(this.login.error=t.error.message.loginError),t.error.message.passwordError&&(this.password.error=t.error.message.passwordError)):t.loginData&&(this.$store.dispatch("logIn",t.loginData),this.$route.query.to&&this.$router.hasRoute(this.$route.query.to)?this.$router.push({name:this.$route.query.to}):this.$router.replace({query:null}))}}};const ee=(0,Z.Z)(te,[["render",Gt]]);var se=ee;const ne=(0,o._)("h1",{class:"primary-text font-size-large left right",style:{padding:"57px 0px 57px 0px"}},"Sign up to 3V3R51NC3",-1),oe={class:"form-field"},re=(0,o._)("label",{for:"input_userEmail"},"Email",-1),ie={key:0,class:"icon-text notification-error"},ae=(0,o._)("span",{class:"bi bi-exclamation-circle-fill"},null,-1),le={class:"form-field"},ue=(0,o._)("label",{for:"input_userPassword"},"Password",-1),ce={class:"row gap-5"},de=["type"],ge={key:0,class:"icon-text notification-error"},pe=(0,o._)("span",{class:"bi bi-exclamation-circle-fill"},null,-1),he={class:"form-field"},me=(0,o._)("label",{for:"input_userLogin"},"Login",-1),ye={key:0,class:"icon-text notification-error"},fe=(0,o._)("span",{class:"bi bi-exclamation-circle-fill"},null,-1),be=(0,o._)("button",{type:"submit",class:"button button-primary hoverable"},"Sign up",-1),we=(0,o._)("hr",null,null,-1),ve={class:"primary-text font-size-small left right"};function _e(t,e,s,i,a,l){const u=(0,o.up)("modal");return(0,o.wg)(),(0,o.j4)(u,{width:"400px"},{content:(0,o.w5)((()=>[ne,(0,o._)("form",{onSubmit:e[4]||(e[4]=(0,n.iM)(((...t)=>l.postUser&&l.postUser(...t)),["prevent"])),class:"column gap-10 y-center"},[(0,o._)("div",oe,[re,(0,o.wy)((0,o._)("input",{id:"input_userEmail",type:"text",class:(0,r.C_)({"input-error":a.email.error}),placeholder:"Enter email","onUpdate:modelValue":e[0]||(e[0]=t=>a.email.data=t)},null,2),[[n.nr,a.email.data]]),a.email.error?((0,o.wg)(),(0,o.iD)("span",ie,[ae,(0,o._)("span",null,(0,r.zw)(a.email.error),1)])):(0,o.kq)("",!0)]),(0,o._)("div",le,[ue,(0,o._)("div",ce,[(0,o.wy)((0,o._)("input",{id:"input_userPassword",class:(0,r.C_)(["w-100",{"input-error":a.password.error}]),type:this.showPassword?"text":"password",placeholder:"Enter password","onUpdate:modelValue":e[1]||(e[1]=t=>a.password.data=t)},null,10,de),[[n.YZ,a.password.data]]),(0,o._)("button",{type:"button",class:(0,r.C_)(["button form-button",{"bi bi-eye-slash-fill":!a.showPassword,"bi bi-eye-fill":a.showPassword}]),onClick:e[2]||(e[2]=t=>this.showPassword=!this.showPassword)},null,2)]),a.password.error?((0,o.wg)(),(0,o.iD)("span",ge,[pe,(0,o._)("span",null,(0,r.zw)(a.password.error),1)])):(0,o.kq)("",!0)]),(0,o._)("div",he,[me,(0,o.wy)((0,o._)("input",{id:"input_userLogin",type:"text",class:(0,r.C_)({"input-error":a.login.error}),placeholder:"What should we call you?","onUpdate:modelValue":e[3]||(e[3]=t=>a.login.data=t)},null,2),[[n.nr,a.login.data]]),a.login.error?((0,o.wg)(),(0,o.iD)("span",ye,[fe,(0,o._)("span",null,(0,r.zw)(a.login.error),1)])):(0,o.kq)("",!0)]),be],32),we,(0,o._)("span",ve,[(0,o.Uk)("Already have an account? "),(0,o._)("button",{class:"button button-link",onClick:e[5]||(e[5]=t=>{this.$router.replace({query:{action:"login",to:this.$route.query.to}})})},"Log in")])])),_:1})}var ke={name:"signUpModal",components:{modal:zt.Z},data(){return{email:{data:null,error:null},password:{data:null,error:null},login:{data:null,error:null},showPassword:!1}},created(){this.$store.getters.getCurrentUser&&(this.$route.query.to&&this.$router.hasRoute(this.$route.query.to)?this.$router.push({name:this.$route.query.to}):this.$router.replace({query:null}))},methods:{async postUser(){if(this.email.data=this.email.data||null,this.email.error=null,this.email.data?(this.email.data=this.email.data.trim().toLowerCase(),this.email.data.length>50?this.email.error="Enter an email that is up to 50 characters.":(0,st.u$)(this.email.data)||(this.email.error="Invalid email.")):this.email.error="Required field.",this.login.data=this.login.data||null,this.login.error=null,this.login.data?(this.login.data=this.login.data.trim().toLowerCase(),this.login.data.length>=6&&this.login.data.length<=50?(0,st.dY)(this.login.data)||(this.login.error="Invalid login."):this.login.error="Enter a login from 6 to 50 characters."):this.login.error="Required field.",this.password.data=this.password.data||null,this.password.error=null,this.password.data?this.password.data.length>=6&&this.password.data.length<=60||(this.password.error="Enter a password from 6 to 60 characters."):this.password.error="Required field.",this.email.error||this.password.error||this.login.error)return;const t=await I.Z.post("users",{email:this.email.data,password:this.password.data,login:this.login.data});t.error?(t.error.message.emailError&&(this.email.error=t.error.message.emailError),t.error.message.loginError&&(this.login.error=t.error.message.loginError)):t.loginData&&(this.$store.dispatch("logIn",t.loginData),this.$route.query.to&&this.$router.hasRoute(this.$route.query.to)?this.$router.push({name:this.$route.query.to}):this.$router.replace({query:null}))}}};const Se=(0,Z.Z)(ke,[["render",_e]]);var xe=Se,Pe={name:"app",components:{contextMenuNav:T,player:rt,playlistModal:Lt,signUpModal:xe,logInModal:se},data(){return{searchQuery:""}},computed:{darkTheme(){return this.$store.getters.getCurrentUser&&this.$store.getters.getCurrentUser.custom_theme?this.$store.getters.getCurrentUser.theme:window.matchMedia("(prefers-color-scheme: dark)").matches}},methods:{authJWTChangedHandler(t){"authJWT"==t.key&&this.$store.dispatch("setCurrentUserByToken")},search(){if(this.searchQuery.trim())return this.$route.matched.some((t=>"Search"==t.name))?this.$router.push({name:this.$route.name,query:{q:this.searchQuery.trim()}}):this.$router.push({name:"Search",query:{q:this.searchQuery.trim()}})}},watch:{"$store.getters.getCurrentUser.accent_color":{handler:function(t){const e=document.querySelector("#app");e.style.setProperty("--accent-color",this.$store.state.accentColors[t]?.hex??this.$store.state.accentColors[0].hex),e.style.setProperty("--accent-color-decimal",this.$store.state.accentColors[t]?.decimal??this.$store.state.accentColors[0].decimal)},immediate:!0}},created(){this.$store.dispatch("setCurrentUserByToken")},mounted(){window.addEventListener("storage",this.authJWTChangedHandler)},beforeUnmount(){window.removeEventListener("storage",this.authJWTChangedHandler)}};const Ce=(0,Z.Z)(Pe,[["render",D],["__scopeId","data-v-e05a1946"]]);var $e=Ce,De=s(2483);const Ie=[{name:"Root",path:"",redirect:{name:"Discover"}},{name:"Discover",path:"/discover",component:()=>Promise.all([s.e(834),s.e(419),s.e(186)]).then(s.bind(s,4186))},{name:"Tag",path:"/tags/:tag",component:()=>s.e(746).then(s.bind(s,2746)),props:!0,redirect:{name:"TagPopular"},children:[{name:"TagPopular",path:"/tags/:tag/popular",component:()=>s.e(477).then(s.bind(s,6746)),props:!0},{name:"TagNew",path:"/tags/:tag/new",component:()=>s.e(687).then(s.bind(s,7687)),props:!0}]},{name:"Search",path:"/search",component:()=>s.e(606).then(s.bind(s,3606)),redirect:{name:"SearchSongs"},children:[{name:"SearchSongs",path:"/search/songs",component:()=>s.e(587).then(s.bind(s,7587))},{name:"SearchPlaylists",path:"/search/playlists",component:()=>Promise.all([s.e(834),s.e(162)]).then(s.bind(s,6162))},{name:"SearchUsers",path:"/search/users",component:()=>Promise.all([s.e(419),s.e(933)]).then(s.bind(s,2933))}]},{name:"Feed",path:"/feed",component:()=>s.e(894).then(s.bind(s,894)),meta:{authRequired:!0}},{name:"You",path:"/you",component:()=>s.e(298).then(s.bind(s,6298)),redirect:{name:"YourSongs"},meta:{authRequired:!0},children:[{path:"songs",name:"YourSongs",component:()=>s.e(643).then(s.bind(s,8643))},{path:"playlists",name:"YourPlaylists",component:()=>Promise.all([s.e(834),s.e(536)]).then(s.bind(s,9536))},{path:"following",name:"YourFollowing",component:()=>Promise.all([s.e(419),s.e(795)]).then(s.bind(s,9795))},{path:"history",name:"YourHistory",component:()=>s.e(153).then(s.bind(s,4153))}]},{name:"User",path:"/id/:login",component:()=>Promise.all([s.e(419),s.e(522)]).then(s.bind(s,7522)),props:!0,redirect:{name:"UserActivity"},children:[{name:"UserActivity",path:"",component:()=>Promise.all([s.e(834),s.e(367)]).then(s.bind(s,367)),props:!0},{name:"UserPopular",path:"popular",component:()=>Promise.all([s.e(834),s.e(367)]).then(s.bind(s,367)),props:!0},{name:"UserSongs",path:"songs",component:()=>s.e(447).then(s.bind(s,7447)),props:!0},{name:"UserPlaylists",path:"playlists",component:()=>Promise.all([s.e(834),s.e(532)]).then(s.bind(s,3532)),props:!0},{name:"UserLikes",path:"likes",component:()=>Promise.all([s.e(834),s.e(507)]).then(s.bind(s,7507)),props:!0}]},{name:"UserFollowers",path:"/id/:login/followers",component:()=>Promise.all([s.e(419),s.e(991)]).then(s.bind(s,8991)),props:!0},{name:"UserFollowing",path:"/id/:login/following",component:()=>Promise.all([s.e(419),s.e(476)]).then(s.bind(s,3476)),props:!0},{name:"Song",path:"/song/:id",component:()=>Promise.all([s.e(834),s.e(419),s.e(576)]).then(s.bind(s,7576)),props:!0},{name:"SongLikes",path:"/song/:id/likes",component:()=>Promise.all([s.e(419),s.e(190)]).then(s.bind(s,4175)),props:!0},{name:"SongPlaylists",path:"/song/:id/playlists",component:()=>Promise.all([s.e(834),s.e(123)]).then(s.bind(s,9123)),props:!0},{name:"SongRelated",path:"/song/:id/related",component:()=>s.e(912).then(s.bind(s,9912)),props:!0},{name:"Upload",path:"/upload",component:()=>s.e(138).then(s.bind(s,3138)),meta:{authRequired:!0}},{name:"Settings",path:"/settings",component:()=>s.e(701).then(s.bind(s,8701)),redirect:{name:"SettingsAccount"},meta:{authRequired:!0},children:[{name:"SettingsAccount",path:"",component:()=>s.e(570).then(s.bind(s,4570))},{name:"SettingsTheme",path:"theme",component:()=>s.e(819).then(s.bind(s,2819))}]},{name:"Notifications",path:"/notifications",component:()=>s.e(669).then(s.bind(s,7669)),meta:{authRequired:!0}},{name:"Messages",path:"/messages",component:()=>s.e(107).then(s.bind(s,6107)),meta:{authRequired:!0}},{name:"PageNotFound",path:"/:catchAll(.*)",component:()=>s.e(676).then(s.bind(s,5676))}],Ue=(0,De.p7)({history:(0,De.PO)("/vue.js-front-end/"),routes:Ie});Ue.beforeEach((async(t,e,s)=>{if(document.title=t.meta?.title??"3V3R51NC3",t.matched.some((t=>t.meta?.authRequired))){const n=await I.Z.get("me");if(n.error){e.meta?.authRequired&&(t.name=e.name,e.name="Root");const n={name:e.name,query:{action:"login",to:t.name}};return s(n)}return s()}return s()}));var Me=Ue,ze=s(65),Ze=(0,ze.MT)({state:{currentPlaylist:JSON.parse(localStorage.getItem("currentPlaylist")||"{}"),currentSongIndex:JSON.parse(localStorage.getItem("currentSongIndex")||"-1"),shuffle:JSON.parse(localStorage.getItem("shuffle")||"false"),repeatMode:JSON.parse(localStorage.getItem("repeatMode")||"0"),volume:JSON.parse(localStorage.getItem("volume")||"0.75"),songHistory:JSON.parse(localStorage.getItem("songHistory")||"[]"),songs:{},playlists:{},users:{},isPlaying:!1,currentUser:void 0,accentColors:[{hex:"#6699ff",decimal:"102, 153, 255"},{hex:"#ff3333",decimal:"255, 51 , 51 "},{hex:"#ff3399",decimal:"255, 51 , 153"},{hex:"#ff6600",decimal:"255, 102, 0  "},{hex:"#33cc66",decimal:"51 , 204, 102"}]},getters:{getCurrentPlaylistSongPos(t){if(t.currentPlaylist.songs)return{playlistID:t.currentPlaylist.id,edited:t.currentPlaylist.edited,songPos:t.currentPlaylist.songs[t.currentSongIndex].pos}},getCurrentSong(t){if(t.currentPlaylist.songs)return t.currentPlaylist.songs[t.currentSongIndex].id},getCurrentUser(t){return t.currentUser},getPlaylist:t=>e=>t.playlists[e]||{error:{status:404,message:"Vuex: Song not found"}},getSong:t=>e=>t.songs[e]||{error:{status:404,message:"Vuex: Playlist not found"}},getUser:t=>e=>t.users[e]||{error:{status:404,message:"Vuex: User not found"}},getSongHistory(t){return t.songHistory.map(((t,e)=>({id:t,pos:e})))}},mutations:{async setCurrentPlaylistAndSong(t,e){t.isPlaying=!1,JSON.stringify(e.playlist)!==JSON.stringify(t.currentPlaylist)&&(t.shuffle=!1),t.currentPlaylist=e.playlist,localStorage.setItem("currentPlaylist",JSON.stringify(t.currentPlaylist)),t.currentSongIndex=e.songIndex,localStorage.setItem("currentSongIndex",JSON.stringify(t.currentSongIndex)),setTimeout((()=>{t.isPlaying=!0}),0)},toggleRepeatMode(t){t.repeatMode=(t.repeatMode+1)%3,localStorage.setItem("repeatMode",JSON.stringify(t.repeatMode))},async shiftCurrentSong(t,e){t.isPlaying=!1,t.currentSongIndex+=e,t.currentSongIndex>=t.currentPlaylist.songs.length&&(t.currentSongIndex=0),t.currentSongIndex<0&&(t.currentSongIndex=t.currentPlaylist.songs.length-1),localStorage.setItem("currentSongIndex",JSON.stringify(t.currentSongIndex)),setTimeout((()=>{t.isPlaying=!0}),0)},async playNextSong(t){switch(t.isPlaying=!1,t.repeatMode){case 0:return t.currentSongIndex++,void(t.currentSongIndex>=t.currentPlaylist.songs.length?(t.currentSongIndex=0,localStorage.setItem("currentSongIndex",JSON.stringify(t.currentSongIndex))):(localStorage.setItem("currentSongIndex",JSON.stringify(t.currentSongIndex)),setTimeout((()=>{t.isPlaying=!0}),0)));case 1:return t.currentSongIndex++,t.currentSongIndex>=t.currentPlaylist.songs.length&&(t.currentSongIndex=0),localStorage.setItem("currentSongIndex",JSON.stringify(t.currentSongIndex)),void setTimeout((()=>{t.isPlaying=!0}),0);case 2:return localStorage.setItem("currentSongIndex",JSON.stringify(t.currentSongIndex)),void setTimeout((()=>{t.isPlaying=!0}),0)}},shuffle(t){if(t.shuffle=!t.shuffle,t.shuffle)for(let e=t.currentPlaylist.songs.length-1;e>0;e--){let s=Math.floor(Math.random()*(e+1));e!==t.currentSongIndex&&s!==t.currentSongIndex&&([t.currentPlaylist.songs[e],t.currentPlaylist.songs[s]]=[t.currentPlaylist.songs[s],t.currentPlaylist.songs[e]])}else t.currentSongIndex=t.currentPlaylist.songs[t.currentSongIndex].pos,t.currentPlaylist.songs.sort(((t,e)=>t.pos-e.pos));t.currentPlaylist.edited=Date.now(),localStorage.setItem("shuffle",JSON.stringify(t.shuffle)),localStorage.setItem("currentPlaylist",JSON.stringify(t.currentPlaylist)),localStorage.setItem("currentSongIndex",JSON.stringify(t.currentSongIndex))},async setCurrentUserByToken(t){if(localStorage.getItem("authJWT")){const e=await I.Z.get("me");e.error?t.currentUser=null:(t.currentUser=e,t.currentUser.picturesrc=I.Z.defaults.baseURL+"users/"+e.login+"/picture")}else t.currentUser=null},logIn(t,e){localStorage.setItem("authJWT",e.authJWT),t.currentUser=e.user,t.currentUser.picturesrc=I.Z.defaults.baseURL+"users/"+e.user.login+"/picture"},logOut(t){localStorage.setItem("authJWT",null),t.currentUser=null,window.location.href=""},togglePlayingState(t){t.isPlaying=!t.isPlaying},loadSong(t,e){t.songs[e.id]=e.data},loadPlaylist(t,e){t.playlists[e.id]=e.data},loadUser(t,e){t.users[e.login]=e.data},setVolume(t,e){t.volume=e,localStorage.setItem("volume",JSON.stringify(t.volume))},clearSongHistory(t){t.songHistory=[],localStorage.setItem("songHistory",JSON.stringify(t.songHistory))},addSongToCurrentPlaylistEnd(t,e){if(!t.currentPlaylist.songs)return t.currentPlaylist={id:Date.now(),songs:[{id:e,pos:0}],edited:Date.now()},t.currentSongIndex=0,void(t.isPlaying=!0);t.currentPlaylist.songs.push({id:e,pos:t.currentPlaylist.songs.length}),t.currentPlaylist.edited=Date.now()},addSongToCurrentPlaylistNext(t,e){if(!t.currentPlaylist.songs)return t.currentPlaylist={id:Date.now(),songs:[{id:e,pos:0}],edited:Date.now()},t.currentSongIndex=0,void(t.isPlaying=!0);t.currentPlaylist.songs.splice(t.currentSongIndex+1,0,{id:e,pos:t.currentSongIndex+1});for(let s=t.currentSongIndex+2;s<t.currentPlaylist.songs.length;s++)t.currentPlaylist.songs.pos++;t.currentPlaylist.edited=Date.now()},clearCurrentPlaylist(t){if(!t.currentPlaylist.songs)return;const e=t.currentPlaylist.songs[t.currentSongIndex];t.currentPlaylist.songs=t.currentPlaylist.songs.filter((t=>t==e)),t.currentPlaylist.edited=Date.now(),t.currentPlaylist.songs[0].pos=0,t.currentSongIndex=0},updateSongHistory(t){if(!t.currentPlaylist.songs)return;const e=t.currentPlaylist.songs[t.currentSongIndex]?.id,s=t.songHistory.findIndex((t=>t==e));-1!=s&&t.songHistory.splice(s,1),t.songHistory.unshift(e),t.songHistory.length>15&&t.songHistory.pop(),localStorage.setItem("songHistory",JSON.stringify(t.songHistory))},toggleSongLike(t,e){t.songs[e].liked=!t.songs[e].liked,t.songs[e].likes_count+=t.songs[e].liked?1:-1},uploadSongCover(t,e){t.songs[e].cover=!0,t.songs[e].coversrc=t.songs[e].coversrc.split("?")[0]+"?"+Date.now()},deleteSongCover(t,e){t.songs[e].cover=!1},togglePlaylistLike(t,e){t.playlists[e].liked=!t.playlists[e].liked,t.playlists[e].likes_count+=t.playlists[e].liked?1:-1},uploadPlaylistCover(t,e){t.playlists[e].cover=!0,t.playlists[e].coversrc=t.playlists[e].coversrc.split("?")[0]+"?"+Date.now()},deletePlaylistCover(t,e){t.playlists[e].cover=!1},toggleUserFollow(t,e){t.users[e].youFollow=!t.users[e].youFollow,t.users[e].followers_count+=t.users[e].youFollow?1:-1},uploadUserProfilePicture(t,e){t.users[e].profile_picture=!0,t.users[e].picturesrc=t.users[e].picturesrc.split("?")[0]+"?"+Date.now(),t.currentUser.profile_picture=t.users[e].profile_picture,t.currentUser.picturesrc=t.users[e].picturesrc},deleteUserProfilePicture(t,e){t.users[e].profile_picture=!1,t.currentUser.profile_picture=t.users[e].profile_picture},uploadUserBanner(t,e){t.users[e].banner=!0,t.users[e].bannersrc=t.users[e].bannersrc.split("?")[0]+"?"+Date.now()},deleteUserBanner(t,e){t.users[e].banner=!1}},actions:{async loadSong({commit:t,state:e},s){if(e.songs[s]&&(e.songs[s].error||Date.now()-e.songs[s].lastUpdated>3e5)||!e.songs[s]){const e=await I.Z.get("songs/"+s);e.coversrc=I.Z.defaults.baseURL+"songs/"+s+"/cover",t("loadSong",{id:s,data:e})}else e.songs[s].lastUpdated=Date.now()},async loadPlaylist({commit:t,state:e},s){if(e.playlists[s]&&(e.playlists[s].error||Date.now()-e.playlists[s].lastUpdated>3e5)||!e.playlists[s]){const e=await I.Z.get("playlists/"+s);e.coversrc=I.Z.defaults.baseURL+"playlists/"+s+"/cover",t("loadPlaylist",{id:s,data:e})}else e.playlists[s].lastUpdated=Date.now()},async loadUser({commit:t,state:e},s){if(e.users[s]&&(e.users[s].error||Date.now()-e.users[s].lastUpdated>3e5)||!e.users[s]){const e=await I.Z.get("users/"+s+"/profile");e.picturesrc=I.Z.defaults.baseURL+"users/"+s+"/picture",e.bannersrc=I.Z.defaults.baseURL+"users/"+s+"/banner",t("loadUser",{login:s,data:e})}else e.users[s].lastUpdated=Date.now()},logIn({commit:t},e){t("logIn",e)},setCurrentUserByToken({commit:t}){t("setCurrentUserByToken")},logOut({commit:t}){t("logOut")},setCurrentPlaylistAndSong({commit:t},e){t("updateSongHistory"),t("setCurrentPlaylistAndSong",JSON.parse(JSON.stringify(e)))},shiftCurrentSong({commit:t},e){t("updateSongHistory"),t("shiftCurrentSong",e)},playNextSong({commit:t}){t("updateSongHistory"),t("playNextSong")},toggleRepeatMode({commit:t}){t("toggleRepeatMode")},shuffle({commit:t}){t("shuffle")},togglePlayingState({commit:t}){t("togglePlayingState")},setVolume({commit:t},e){t("setVolume",e)},clearSongHistory({commit:t}){t("clearSongHistory")},clearCurrentPlaylist({commit:t}){t("clearCurrentPlaylist")},addSongToCurrentPlaylistEnd({commit:t},e){t("addSongToCurrentPlaylistEnd",e)},addSongToCurrentPlaylistNext({commit:t},e){t("addSongToCurrentPlaylistNext",e)},toggleSongLike({commit:t},e){t("toggleSongLike",e)},uploadSongCover({commit:t},e){t("uploadSongCover",e)},deleteSongCover({commit:t},e){t("deleteSongCover",e)},togglePlaylistLike({commit:t},e){t("togglePlaylistLike",e)},uploadPlaylistCover({commit:t},e){t("uploadPlaylistCover",e)},deletePlaylistCover({commit:t},e){t("deletePlaylistCover",e)},toggleUserFollow({commit:t},e){t("toggleUserFollow",e)},uploadUserProfilePicture({commit:t},e){t("uploadUserProfilePicture",e)},deleteUserProfilePicture({commit:t},e){t("deleteUserProfilePicture",e)},uploadUserBanner({commit:t},e){t("uploadUserBanner",e)},deleteUserBanner({commit:t},e){t("deleteUserBanner",e)}},modules:{}});(0,n.ri)($e).use(Ze).use(Me).mount("#app")},5535:function(t,e,s){s.d(e,{Z:function(){return g}});var n=s(3396);const o={class:"error-message"},r={key:0,class:"error-icon secondary-text"},i={key:1,class:"secondary-text font-size-large"},a={key:2,class:"secondary-text font-size-big"};function l(t,e,s,l,u,c){return(0,n.wg)(),(0,n.iD)("div",o,[this.$slots.errorIcon?((0,n.wg)(),(0,n.iD)("div",r,[(0,n.WI)(t.$slots,"errorIcon",{},void 0,!0)])):(0,n.kq)("",!0),this.$slots.status?((0,n.wg)(),(0,n.iD)("span",i,[(0,n.WI)(t.$slots,"status",{},void 0,!0)])):(0,n.kq)("",!0),this.$slots.message?((0,n.wg)(),(0,n.iD)("span",a,[(0,n.WI)(t.$slots,"message",{},void 0,!0)])):(0,n.kq)("",!0)])}var u={name:"errorMessage"},c=s(89);const d=(0,c.Z)(u,[["render",l],["__scopeId","data-v-0fad805c"]]);var g=d},8065:function(t,e,s){s.d(e,{Z:function(){return g}});var n=s(3396),o=s(7139);const r={class:"modal-shade"},i={class:"modal"};function a(t,e,s,a,l,u){const c=(0,n.up)("panel");return(0,n.wg)(),(0,n.iD)("div",r,[(0,n._)("div",i,[(0,n.Wm)(c,{style:(0,o.j5)("width:"+this.width+";height:"+this.height+";")},(0,n.Nv)({content:(0,n.w5)((()=>[(0,n.WI)(t.$slots,"content",{},void 0,!0)])),_:2},[this.$slots.header?{name:"header",fn:(0,n.w5)((()=>[(0,n.WI)(t.$slots,"header",{},void 0,!0)])),key:"0"}:void 0]),1032,["style"]),(0,n._)("button",{class:"modal-close-button bi bi-x",onClick:e[0]||(e[0]=e=>t.$router.replace({query:null}))})])])}var l=s(1417),u={name:"modal",components:{panel:l.Z},props:{width:{default:"auto"},height:{default:"auto"}}},c=s(89);const d=(0,c.Z)(u,[["render",a],["__scopeId","data-v-035268ea"]]);var g=d},1417:function(t,e,s){s.d(e,{Z:function(){return p}});var n=s(3396);const o={class:"panel"},r={key:0,class:"panel-header"},i={class:"panel-caption"},a={class:"panel-menu"},l={class:"panel-content"};function u(t,e,s,u,c,d){return(0,n.wg)(),(0,n.iD)("article",o,[this.$slots.header?((0,n.wg)(),(0,n.iD)("div",r,[(0,n._)("span",i,[(0,n.WI)(t.$slots,"header",{},void 0,!0)]),(0,n._)("div",a,[(0,n.WI)(t.$slots,"menu",{},void 0,!0)])])):(0,n.kq)("",!0),(0,n._)("div",l,[(0,n.WI)(t.$slots,"content",{},void 0,!0)])])}var c={name:"panel"},d=s(89);const g=(0,d.Z)(c,[["render",u],["__scopeId","data-v-1deab29a"]]);var p=g},3818:function(t,e,s){s.d(e,{Z:function(){return ve}});var n=s(3396),o=s(7139);const r=(0,n._)("span",{class:"bi bi-music-note-beamed"},null,-1),i={key:1,class:"loader-wrapper"},a=(0,n._)("div",{class:"loader"},null,-1),l=[a];function u(t,e,s,a,u,c){const d=(0,n.up)("errorMessage"),g=(0,n.up)("songDropdown");return this.playlist?((0,n.wg)(),(0,n.iD)(n.HY,{key:0},[this.playlist.error?((0,n.wg)(),(0,n.j4)(d,{key:0},{errorIcon:(0,n.w5)((()=>[r])),message:(0,n.w5)((()=>[(0,n.Uk)((0,o.zw)(this.playlist.error.message),1)])),_:1})):((0,n.wg)(),(0,n.iD)("ul",{key:1,class:(0,o.C_)(["container",s.type]),ref:"list"},[this.contextMenuSong?((0,n.wg)(),(0,n.j4)(g,{key:0,song:this.contextMenuSong,x:this.contextMenuX,y:this.contextMenuY,onHideSongDropdown:e[0]||(e[0]=t=>this.contextMenuSong=void 0)},null,8,["song","x","y"])):(0,n.kq)("",!0),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(c.getShortList,((t,s)=>((0,n.wg)(),(0,n.iD)("li",null,[((0,n.wg)(),(0,n.j4)((0,n.LL)(this.dynamicComponent),{id:t.id,pos:t.pos,key:t.id,class:(0,o.C_)({active:JSON.stringify(this.contextMenuSong)==JSON.stringify({id:t.id,pos:t.pos})}),onSetCurrentSong:t=>c.setCurrentPlaylistAndSong(s),onOpenSongDropdown:c.openSongDropdown,onLoaded:e[1]||(e[1]=t=>{this.counter++})},null,40,["id","pos","class","onSetCurrentSong","onOpenSongDropdown"]))])))),256))],2))],64)):((0,n.wg)(),(0,n.iD)("div",i,l))}var c=s(8157),d=s(9242);const g={class:"cover-wrapper s52x52"},p=["src"],h={key:1,class:"cover bi bi-music-note"},m=(0,n._)("div",{class:"shade"},null,-1),y={class:"cover-menu"},f=(0,n._)("div",null,null,-1),b=(0,n._)("div",null,null,-1),w=(0,n._)("div",null,null,-1),v=[f,b,w],_={class:"info-wrapper"},k={class:"secondary-text font-size-small"},S={key:1},x={key:2},P={class:"row bottom"},C={class:"icon-text secondary-text font-size-tiny"},$=(0,n._)("span",{class:"bi bi-headphones"},null,-1),D={class:"icon-text secondary-text font-size-tiny"},I=(0,n._)("span",{class:"bi bi-suit-heart-fill"},null,-1),U={class:"song-menu"},M={class:"song-duration font-size-small"};function z(t,e,s,r,i,a){const l=(0,n.up)("router-link"),u=(0,n.up)("songExtendedSkeleton");return(0,n.wg)(),(0,n.j4)(d.uT,{name:"skeletonFade"},{default:(0,n.w5)((()=>[(this.$parent.loaded??1)&&this.loaded?((0,n.wg)(),(0,n.iD)("div",{key:0,class:(0,o.C_)(["song item",{current:t.current}]),onClick:e[5]||(e[5]=(...e)=>t.setCurrentSong&&t.setCurrentSong(...e))},[(0,n._)("div",g,[this.song.cover?((0,n.wg)(),(0,n.iD)("img",{key:0,class:"cover",src:this.song.coversrc},null,8,p)):((0,n.wg)(),(0,n.iD)("div",h)),m,(0,n._)("div",y,[(0,n._)("button",{class:(0,o.C_)(["button button-default button-round button-medium",this.isPlaying?"bi bi-pause-circle-fill":"bi bi-play-circle-fill"])},null,2)]),(0,n._)("div",{class:(0,o.C_)(["wrapper-wave",{playing:this.isPlaying}])},v,2)]),(0,n._)("div",_,[(0,n._)("div",k,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(this.song.artists,((t,s)=>((0,n.wg)(),(0,n.iD)(n.HY,null,[t.login?((0,n.wg)(),(0,n.j4)(l,{key:0,to:{name:"User",params:{login:t.login}},onClick:e[0]||(e[0]=(0,d.iM)((()=>{}),["stop"])),class:"alink"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,o.zw)(t.name),1)])),_:2},1032,["to"])):((0,n.wg)(),(0,n.iD)("span",S,(0,o.zw)(t.name),1)),s+1<this.song.artists.length?((0,n.wg)(),(0,n.iD)("span",x,", ")):(0,n.kq)("",!0)],64)))),256))]),(0,n.Wm)(l,{to:{name:"Song",params:{id:this.id}},onClick:e[1]||(e[1]=(0,d.iM)((()=>{}),["stop"])),class:"primary-text hoverable font-size-medium"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,o.zw)(this.song.name),1)])),_:1},8,["to"]),(0,n._)("div",P,[(0,n._)("span",C,[$,(0,n._)("span",null,(0,o.zw)(t.abbreviateNumber(88)),1)]),(0,n._)("span",D,[I,(0,n._)("span",null,(0,o.zw)(t.abbreviateNumber(this.song.likes_count)),1)])])]),(0,n._)("div",U,[(0,n._)("button",{id:"dropdownButton",class:"button button-secondary button-tiny bi bi-three-dots",onClick:e[2]||(e[2]=(0,d.iM)((e=>t.openDropdown(e)),["stop"]))}),(0,n._)("button",{class:(0,o.C_)(["button button-default button-tiny bi bi-suit-heart-fill",{toggled:this.song.liked}]),onClick:e[3]||(e[3]=(0,d.iM)((t=>this.like()),["stop"]))},null,2),(0,n._)("button",{id:"deleteSongButton",class:"button button-default button-tiny bi bi-x-lg",onClick:e[4]||(e[4]=(0,d.iM)((e=>t.$emit("deleteSong")),["stop"]))})]),(0,n._)("div",M,(0,o.zw)(t.numberToTimeString(this.song.duration)),1)],2)):((0,n.wg)(),(0,n.j4)(u,{key:1}))])),_:1})}var Z=s(8438);const q={class:"song item"},T=(0,n._)("div",{class:"cover-wrapper s52x52 shimmer"},null,-1),L={class:"info-wrapper"},N={class:"row bottom"};function W(t,e,s,o,r,i){const a=(0,n.up)("skeleton");return(0,n.wg)(),(0,n.iD)("div",q,[T,(0,n._)("div",L,[(0,n.Wm)(a,{class:"font-size-small shimmer"}),(0,n.Wm)(a,{class:"font-size-medium shimmer"}),(0,n._)("div",N,[(0,n.Wm)(a,{class:"font-size-tiny shimmer",exactwidth:30}),(0,n.Wm)(a,{class:"font-size-tiny shimmer",exactwidth:30})])])])}var j=s(3097),E={name:"songExtendedSkeleton",components:{skeleton:j.Z}},O=s(89);const H=(0,O.Z)(E,[["render",W]]);var R=H,B={name:"songExtended",extends:Z.Z,components:{songExtendedSkeleton:R}};const J=(0,O.Z)(B,[["render",z]]);var V=J;const A={class:"cover-wrapper s180x180"},Y=["src"],F={key:1,class:"cover bi bi-music-note"},K=(0,n._)("div",{class:"shade"},null,-1),Q={class:"cover-menu"},X={class:"cover-menu song-options"},G={class:"info-wrapper"},tt={class:"secondary-text font-size-small"},et={key:1},st={key:2};function nt(t,e,s,r,i,a){const l=(0,n.up)("router-link"),u=(0,n.up)("songCardSkeleton");return(0,n.wg)(),(0,n.j4)(d.uT,{name:"skeletonFade"},{default:(0,n.w5)((()=>[(this.$parent.loaded??1)&&this.loaded?((0,n.wg)(),(0,n.iD)("div",{key:0,class:(0,o.C_)(["song card",{current:t.current}])},[(0,n._)("div",A,[this.song.cover?((0,n.wg)(),(0,n.iD)("img",{key:0,class:"cover",src:this.song.coversrc},null,8,Y)):((0,n.wg)(),(0,n.iD)("div",F)),K,(0,n._)("div",Q,[(0,n._)("button",{class:(0,o.C_)(["button button-default button-round button-large",this.isPlaying?"bi bi-pause-circle-fill":"bi bi-play-circle-fill"]),onClick:e[0]||(e[0]=(...e)=>t.setCurrentSong&&t.setCurrentSong(...e))},null,2)]),(0,n._)("div",X,[(0,n._)("button",{class:(0,o.C_)(["button button-default button-tiny bi bi-suit-heart-fill",{toggled:this.song.liked}]),onClick:e[1]||(e[1]=(0,d.iM)((t=>this.like()),["stop"]))},null,2),(0,n._)("button",{id:"dropdownButton",class:"button button-default button-tiny bi bi-three-dots",onClick:e[2]||(e[2]=(0,d.iM)((e=>t.openDropdown(e)),["stop"]))})])]),(0,n._)("div",G,[(0,n._)("div",tt,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(this.song.artists,((t,s)=>((0,n.wg)(),(0,n.iD)(n.HY,null,[t.login?((0,n.wg)(),(0,n.j4)(l,{key:0,to:{name:"User",params:{login:t.login}},onClick:e[3]||(e[3]=(0,d.iM)((()=>{}),["stop"])),class:"alink"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,o.zw)(t.name),1)])),_:2},1032,["to"])):((0,n.wg)(),(0,n.iD)("span",et,(0,o.zw)(t.name),1)),s+1<this.song.artists.length?((0,n.wg)(),(0,n.iD)("span",st,", ")):(0,n.kq)("",!0)],64)))),256))]),(0,n.Wm)(l,{to:{name:"Song",params:{id:this.id}},onClick:e[4]||(e[4]=(0,d.iM)((()=>{}),["stop"])),class:"primary-text hoverable font-size-medium"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,o.zw)(this.song.name),1)])),_:1},8,["to"])])],2)):((0,n.wg)(),(0,n.j4)(u,{key:1}))])),_:1})}const ot={class:"song card"},rt=(0,n._)("div",{class:"cover-wrapper s180x180 shimmer"},null,-1),it={class:"info-wrapper"};function at(t,e,s,o,r,i){const a=(0,n.up)("skeleton");return(0,n.wg)(),(0,n.iD)("div",ot,[rt,(0,n._)("div",it,[(0,n.Wm)(a,{class:"font-size-small shimmer"}),(0,n.Wm)(a,{class:"font-size-medium shimmer"})])])}var lt={name:"songCardSkeleton",components:{skeleton:j.Z}};const ut=(0,O.Z)(lt,[["render",at]]);var ct=ut,dt={name:"songCard",extends:Z.Z,components:{songCardSkeleton:ct}};const gt=(0,O.Z)(dt,[["render",nt]]);var pt=gt;const ht=t=>((0,n.dD)("data-v-774f6a27"),t=t(),(0,n.Cn)(),t),mt={key:0,class:"song banner"},yt={class:"column w-100",style:{overflow:"hidden"}},ft={class:"row"},bt={class:"info-wrapper gap-10"},wt={class:"banner-info banner-info-secondary font-size-big"},vt={key:1},_t={key:2},kt={class:"banner-info banner-info-primary font-size-large"},St={class:"banner-info banner-info-secondary font-size-small"},xt=ht((()=>(0,n._)("span",{class:"bi bi-dot"},null,-1))),Pt={class:"banner-info banner-info-secondary font-size-tiny"},Ct={class:"tag-container right"},$t={class:"row bottom gap-5 y-center"},Dt=ht((()=>(0,n._)("span",{class:"bi bi-suit-heart-fill"},null,-1))),It=ht((()=>(0,n._)("span",{class:"bi bi-music-note-list"},null,-1))),Ut=ht((()=>(0,n._)("span",null,"Add to playlist",-1))),Mt=[It,Ut],zt=ht((()=>(0,n._)("span",{class:"bi bi-music-note-list"},null,-1))),Zt=ht((()=>(0,n._)("span",null,"Play next",-1))),qt=[zt,Zt],Tt=ht((()=>(0,n._)("span",{class:"bi bi-link"},null,-1))),Lt=ht((()=>(0,n._)("span",null,"Copy link",-1))),Nt=[Tt,Lt],Wt=ht((()=>(0,n._)("button",{class:"button button-banner icon-text",style:{width:"105px"}},[(0,n._)("span",{class:"bi bi-download"}),(0,n._)("span",null,"Download")],-1))),jt={class:"cover-wrapper s320x320 right"},Et=["src"],Ot={key:1,class:"cover bi bi-music-note"};function Ht(t,e,s,r,i,a){const l=(0,n.up)("router-link"),u=(0,n.up)("songBannerSkeleton");return(0,n.wg)(),(0,n.j4)(d.uT,{name:"skeletonFade"},{default:(0,n.w5)((()=>[(this.$parent.loaded??1)&&this.loaded?((0,n.wg)(),(0,n.iD)("div",mt,[(0,n._)("div",{class:"banner-bg",style:(0,o.j5)(this.gradient)},null,4),(0,n._)("div",yt,[(0,n._)("div",ft,[(0,n._)("button",{class:(0,o.C_)(["button button-default button-round button-large toggled",this.isPlaying?"bi bi-pause-circle-fill":"bi bi-play-circle-fill"]),onClick:e[0]||(e[0]=(...e)=>t.setCurrentSong&&t.setCurrentSong(...e))},null,2),(0,n._)("div",bt,[(0,n._)("span",wt,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(this.song.artists,((t,e)=>((0,n.wg)(),(0,n.iD)(n.HY,null,[t.login?((0,n.wg)(),(0,n.j4)(l,{key:0,to:{name:"User",params:{login:t.login}},class:"alink"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,o.zw)(t.name),1)])),_:2},1032,["to"])):((0,n.wg)(),(0,n.iD)("span",vt,(0,o.zw)(t.name),1)),e+1<this.song.artists.length?((0,n.wg)(),(0,n.iD)("span",_t,", ")):(0,n.kq)("",!0)],64)))),256))]),(0,n._)("h1",kt,(0,o.zw)(this.song.name),1),(0,n._)("span",St,[(0,n.Uk)((0,o.zw)(t.abbreviateNumber(88))+" play"+(0,o.zw)("s")+" ",1),xt,(0,n.Uk)(" "+(0,o.zw)(t.abbreviateNumber(this.song.likes_count))+" like"+(0,o.zw)(1==this.song.likes_count?"":"s"),1)]),(0,n._)("span",Pt,[(0,n.Uk)(" Uploaded by "),(0,n.Wm)(l,{to:{name:"User",params:{login:this.song.created_by}},class:"alink"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,o.zw)(this.song.created_by_username),1)])),_:1},8,["to"])])]),(0,n._)("ul",Ct,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(this.song.tags,(t=>((0,n.wg)(),(0,n.iD)("li",null,[(0,n.Wm)(l,{to:{name:"Tag",params:{tag:t.tag}},class:"button button-tag"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,o.zw)(t.tag),1)])),_:2},1032,["to"])])))),256))])]),(0,n._)("div",$t,[(0,n._)("button",{class:(0,o.C_)(["button button-banner icon-text",{toggled:this.song.liked}]),style:{width:"75px"},onClick:e[1]||(e[1]=t=>this.like())},[Dt,(0,n._)("span",null,(0,o.zw)(this.song.liked?"Liked":"Like"),1)],2),(0,n._)("button",{class:"button button-banner icon-text",style:{width:"135px"},onClick:e[2]||(e[2]=t=>this.$store.dispatch("addSongToCurrentPlaylistEnd",this.song.id))},Mt),(0,n._)("button",{class:"button button-banner icon-text",style:{width:"100px"},onClick:e[3]||(e[3]=t=>this.$store.dispatch("addSongToCurrentPlaylistNext",this.song.id))},qt),(0,n._)("button",{class:"button button-banner icon-text",style:{width:"100px"},onClick:e[4]||(e[4]=t=>this.copyLinkToClipboard())},Nt),Wt])]),(0,n._)("div",jt,[this.song.cover?((0,n.wg)(),(0,n.iD)("img",{key:0,id:"songCover",class:"cover",src:this.song.coversrc,crossorigin:"anonymous",onLoad:e[5]||(e[5]=(...t)=>a.setColors&&a.setColors(...t))},null,40,Et)):((0,n.wg)(),(0,n.iD)("div",Ot))])])):((0,n.wg)(),(0,n.j4)(u,{key:1}))])),_:1})}const Rt={class:"song banner"},Bt={class:"column w-100",style:{overflow:"hidden"}},Jt={class:"row"},Vt=(0,n._)("button",{class:"button button-default button-round button-large toggled bi bi-play-circle-fill"},null,-1),At={class:"info-wrapper gap-10"},Yt={class:"row bottom gap-5 y-center"},Ft=(0,n._)("div",{class:"cover-wrapper s320x320 right shimmer"},null,-1);function Kt(t,e,s,r,i,a){const l=(0,n.up)("skeleton");return(0,n.wg)(),(0,n.iD)("div",Rt,[(0,n._)("div",Bt,[(0,n._)("div",{class:"banner-bg",style:(0,o.j5)(this.gradient)},null,4),(0,n._)("div",Jt,[Vt,(0,n._)("div",At,[(0,n.Wm)(l,{class:"banner-info font-size-big shimmer",minwidth:150,maxwidth:300}),(0,n.Wm)(l,{class:"banner-info font-size-large shimmer",minwidth:350,maxwidth:500}),(0,n.Wm)(l,{class:"banner-info font-size-small shimmer",exactwidth:140}),(0,n.Wm)(l,{class:"banner-info font-size-tiny shimmer",minwidth:150,maxwidth:200})])]),(0,n._)("div",Yt,[(0,n.Wm)(l,{class:"button button-banner shimmer",exactwidth:75}),(0,n.Wm)(l,{class:"button button-banner shimmer",exactwidth:135}),(0,n.Wm)(l,{class:"button button-banner shimmer",exactwidth:100}),(0,n.Wm)(l,{class:"button button-banner shimmer",exactwidth:100}),(0,n.Wm)(l,{class:"button button-banner shimmer",exactwidth:105})])]),Ft])}var Qt={name:"songBannerSkeleton",components:{skeleton:j.Z},data(){return{colorA:"var(--panel-border-color)",colorB:"var(--main-background-color)"}},computed:{gradient(){return"background: linear-gradient(135deg, "+this.colorA+" 0%, "+this.colorB+" 100%)"}}};const Xt=(0,O.Z)(Qt,[["render",Kt]]);var Gt=Xt,te=s(6419),ee={name:"songBanner",extends:Z.Z,components:{songBannerSkeleton:Gt},data(){return{colorA:"var(--panel-border-color)",colorB:"var(--main-background-color)"}},computed:{gradient(){return"background: linear-gradient(135deg, "+this.colorA+" 0%, "+this.colorB+" 100%)"}},methods:{setColors(){const t=document.getElementById("songCover"),e=new te.Z,s=e.getPalette(t,2).map((t=>"rgb("+t.join(",")+")"));[this.colorA,this.colorB]=s}}};const se=(0,O.Z)(ee,[["render",Ht],["__scopeId","data-v-774f6a27"]]);var ne=se,oe=s(5535);const re=t=>((0,n.dD)("data-v-1acfa3b2"),t=t(),(0,n.Cn)(),t),ie=re((()=>(0,n._)("span",{class:"accent-text bi bi-music-note-list"},null,-1))),ae=re((()=>(0,n._)("span",null,"Play next",-1))),le=[ie,ae],ue=re((()=>(0,n._)("span",{class:"accent-text bi bi-music-note-list"},null,-1))),ce=re((()=>(0,n._)("span",null,"Add to current playlist",-1))),de=[ue,ce],ge=re((()=>(0,n._)("span",{class:"accent-text bi bi-globe"},null,-1))),pe=re((()=>(0,n._)("span",null,"Song page",-1)));function he(t,e,s,r,i,a){const l=(0,n.up)("router-link");return(0,n.wg)(),(0,n.iD)("div",{class:"song-context-menu",style:(0,o.j5)("right: calc(100% - "+this.x+"px); top:"+this.y+"px;")},[(0,n._)("button",{class:"button icon-text",onClick:e[0]||(e[0]=t=>this.$store.dispatch("addSongToCurrentPlaylistNext",this.song.id))},le),(0,n._)("button",{class:"button icon-text",onClick:e[1]||(e[1]=t=>this.$store.dispatch("addSongToCurrentPlaylistEnd",this.song.id))},de),(0,n.Wm)(l,{class:"button icon-text",to:{name:"Song",params:{id:this.song.id}}},{default:(0,n.w5)((()=>[ge,pe])),_:1},8,["to"])],4)}var me={name:"dropdown",props:{song:{default:void 0},x:{default:0},y:{default:0}},mounted(){document.addEventListener("click",this.close)},beforeUnmount(){document.removeEventListener("click",this.close)},methods:{close(){this.$emit("hideSongDropdown")}}};const ye=(0,O.Z)(me,[["render",he],["__scopeId","data-v-1acfa3b2"]]);var fe=ye,be={name:"songContainer",components:{songItem:c.Z,songExtended:V,songCard:pt,songBanner:ne,errorMessage:oe.Z,songDropdown:fe},props:{playlist:{default:void 0},maxDisplay:{default:0},type:{default:""},dynamicComponent:{default:"songItem"}},data(){return{counter:0,contextMenuX:0,contextMenuY:0,contextMenuSong:void 0}},methods:{setCurrentPlaylistAndSong(t){this.$store.dispatch("setCurrentPlaylistAndSong",{playlist:this.playlist,songIndex:t})},openSongDropdown(t,e){let s=t.target;const n=t.target.getBoundingClientRect();let o=n.width,r=n.height;while(s.offsetParent&&s!=this.$refs.list)o+=s.offsetLeft,r+=s.offsetTop,s=s.offsetParent;this.contextMenuX=o,this.contextMenuY=r,this.contextMenuSong=e}},computed:{current(){return this.$store.state.currentPlaylist.id===this.playlist.id},loaded(){return this.counter==this.getShortList.length},getShortList(){return this.maxDisplay<1?this.playlist.songs:this.playlist.songs?.slice(0,this.maxDisplay)}}};const we=(0,O.Z)(be,[["render",u]]);var ve=we},3342:function(t,e,s){s.d(e,{Z:function(){return a}});s(7658);var n=s(3278),o=s(7285),r={name:"playlistInterface",props:{id:{default:"noid"}},data(){return{loaded:!1}},computed:{playlist(){return this.$store.getters.getPlaylist(this.id)},current(){return this.$store.state.currentPlaylist.id===this.id},isPlaying(){return!!this.current&&this.$store.state.isPlaying}},async created(){await this.$store.dispatch("loadPlaylist",this.id),this.loaded=!0,this.$emit("loaded")},methods:{async like(){if(this.playlist.liked){const t=await n.Z.delete("me/playlists/likes/"+this.id);if(401==t?.error?.status)return this.$router.push({path:this.$route.fullPath,query:{action:"login"}});this.$store.dispatch("togglePlaylistLike",this.id)}else{const t=await n.Z.post("me/playlists/likes",{id:this.id});if(401==t.error?.status)return this.$router.push({path:this.$route.fullPath,query:{action:"login"}});this.$store.dispatch("togglePlaylistLike",this.id)}},playPlaylist(){this.playlist.songList.songs?.length>0&&(this.current?this.$store.dispatch("togglePlayingState"):this.$store.dispatch("setCurrentPlaylistAndSong",{playlist:{id:this.id,songs:this.playlist.songList.songs},songIndex:0}))},abbreviateNumber:o.dm}};const i=r;var a=i},8438:function(t,e,s){s.d(e,{Z:function(){return a}});s(6229),s(7330),s(2062),s(7658);var n=s(3278),o=s(7285),r={name:"songInterface",props:{id:{default:"noid"},pos:{type:Number,default:-1}},data(){return{loaded:!1}},computed:{song(){return this.$store.getters.getSong(this.id)},current(){return this.id==this.$store.getters.getCurrentSong&&-1!=this.pos},isPlaying(){return!!this.current&&this.$store.state.isPlaying}},async created(){await this.$store.dispatch("loadSong",this.id),this.loaded=!0,this.$emit("loaded")},methods:{numberToTimeString:o.H4,abbreviateNumber:o.dm,setCurrentSong(){this.current?this.$store.dispatch("togglePlayingState"):this.$emit("setCurrentSong")},openDropdown(t){this.$emit("openSongDropdown",t,{id:this.id,pos:this.pos})},copyLinkToClipboard(){const t=this.$router.resolve({name:"Song",params:{id:this.id}}),e=new URL(t.href,window.location.origin).href;navigator.clipboard.writeText(e)},async like(){if(this.song.liked){const t=await n.Z.delete("me/songs/likes/"+this.id);if(401==t?.error?.status)return this.$router.push({path:this.$route.fullPath,query:{action:"login"}});this.$store.dispatch("toggleSongLike",this.id)}else{const t=await n.Z.post("me/songs/likes",{id:this.id});if(401==t.error?.status)return this.$router.push({path:this.$route.fullPath,query:{action:"login"}});this.$store.dispatch("toggleSongLike",this.id)}}}};const i=r;var a=i},3097:function(t,e,s){s.d(e,{Z:function(){return u}});var n=s(3396),o=s(7139);function r(t,e,s,r,i,a){return(0,n.wg)(),(0,n.iD)("div",{class:"skeleton",style:(0,o.j5)({width:this.width+"px"})},"​",4)}var i={name:"skeleton",props:{minwidth:{default:80},maxwidth:{default:200},exactwidth:{default:0}},computed:{width(){return this.exactwidth||Math.floor(this.minwidth+Math.random()*(this.maxwidth+1-this.minwidth))}}},a=s(89);const l=(0,a.Z)(i,[["render",r]]);var u=l},8157:function(t,e,s){s.d(e,{Z:function(){return q}});var n=s(3396),o=s(9242),r=s(7139);const i={class:"cover-wrapper s36x36"},a=["src"],l={key:1,class:"cover bi bi-music-note"},u=(0,n._)("div",{class:"shade"},null,-1),c={class:"cover-menu"},d=(0,n._)("div",null,null,-1),g=(0,n._)("div",null,null,-1),p=(0,n._)("div",null,null,-1),h=[d,g,p],m={class:"info-wrapper"},y={class:"secondary-text font-size-small"},f={key:1},b={key:2},w={class:"song-menu"},v={class:"song-duration font-size-small"};function _(t,e,s,d,g,p){const _=(0,n.up)("router-link"),k=(0,n.up)("songItemSkeleton");return(0,n.wg)(),(0,n.j4)(o.uT,{name:"skeletonFade"},{default:(0,n.w5)((()=>[(this.$parent.loaded??1)&&this.loaded?((0,n.wg)(),(0,n.iD)("div",{key:0,class:(0,r.C_)(["song item",{current:t.current}]),onClick:e[5]||(e[5]=(...e)=>t.setCurrentSong&&t.setCurrentSong(...e))},[(0,n._)("div",i,[this.song.cover?((0,n.wg)(),(0,n.iD)("img",{key:0,class:"cover",src:this.song.coversrc},null,8,a)):((0,n.wg)(),(0,n.iD)("div",l)),u,(0,n._)("div",c,[(0,n._)("button",{class:(0,r.C_)(["button button-default button-round button-small",this.isPlaying?"bi bi-pause-circle-fill":"bi bi-play-circle-fill"])},null,2)]),(0,n._)("div",{class:(0,r.C_)(["wrapper-wave",{playing:this.isPlaying}])},h,2)]),(0,n._)("div",m,[(0,n._)("div",y,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(this.song.artists,((t,s)=>((0,n.wg)(),(0,n.iD)(n.HY,null,[t.login?((0,n.wg)(),(0,n.j4)(_,{key:0,to:{name:"User",params:{login:t.login}},onClick:e[0]||(e[0]=(0,o.iM)((()=>{}),["stop"])),class:"alink"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,r.zw)(t.name),1)])),_:2},1032,["to"])):((0,n.wg)(),(0,n.iD)("span",f,(0,r.zw)(t.name),1)),s+1<this.song.artists.length?((0,n.wg)(),(0,n.iD)("span",b,", ")):(0,n.kq)("",!0)],64)))),256))]),(0,n.Wm)(_,{to:{name:"Song",params:{id:this.id}},onClick:e[1]||(e[1]=(0,o.iM)((()=>{}),["stop"])),class:"primary-text hoverable font-size-medium"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,r.zw)(this.song.name),1)])),_:1},8,["to"])]),(0,n._)("div",w,[(0,n._)("button",{id:"dropdownButton",class:"button button-secondary button-tiny bi bi-three-dots",onClick:e[2]||(e[2]=(0,o.iM)((e=>t.openDropdown(e)),["stop"]))}),(0,n._)("button",{class:(0,r.C_)(["button button-default button-tiny bi bi-suit-heart-fill",{toggled:this.song.liked}]),onClick:e[3]||(e[3]=(0,o.iM)((t=>this.like()),["stop"]))},null,2),(0,n._)("button",{id:"deleteSongButton",class:"button button-default button-tiny bi bi-x-lg",onClick:e[4]||(e[4]=(0,o.iM)((e=>t.$emit("deleteSong")),["stop"]))})]),(0,n._)("div",v,(0,r.zw)(t.numberToTimeString(this.song.duration)),1)],2)):((0,n.wg)(),(0,n.j4)(k,{key:1}))])),_:1})}var k=s(8438);const S={class:"song item"},x=(0,n._)("div",{class:"cover-wrapper s36x36 shimmer"},null,-1),P={class:"info-wrapper"};function C(t,e,s,o,r,i){const a=(0,n.up)("skeleton");return(0,n.wg)(),(0,n.iD)("div",S,[x,(0,n._)("div",P,[(0,n.Wm)(a,{class:"font-size-small shimmer"}),(0,n.Wm)(a,{class:"font-size-medium shimmer"})])])}var $=s(3097),D={name:"songItemSkeleton",components:{skeleton:$.Z}},I=s(89);const U=(0,I.Z)(D,[["render",C]]);var M=U,z={name:"songItem",extends:k.Z,components:{songItemSkeleton:M}};const Z=(0,I.Z)(z,[["render",_]]);var q=Z}},e={};function s(n){var o=e[n];if(void 0!==o)return o.exports;var r=e[n]={exports:{}};return t[n].call(r.exports,r,r.exports,s),r.exports}s.m=t,function(){var t=[];s.O=function(e,n,o,r){if(!n){var i=1/0;for(c=0;c<t.length;c++){n=t[c][0],o=t[c][1],r=t[c][2];for(var a=!0,l=0;l<n.length;l++)(!1&r||i>=r)&&Object.keys(s.O).every((function(t){return s.O[t](n[l])}))?n.splice(l--,1):(a=!1,r<i&&(i=r));if(a){t.splice(c--,1);var u=o();void 0!==u&&(e=u)}}return e}r=r||0;for(var c=t.length;c>0&&t[c-1][2]>r;c--)t[c]=t[c-1];t[c]=[n,o,r]}}(),function(){s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,{a:e}),e}}(),function(){s.d=function(t,e){for(var n in e)s.o(e,n)&&!s.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})}}(),function(){s.f={},s.e=function(t){return Promise.all(Object.keys(s.f).reduce((function(e,n){return s.f[n](t,e),e}),[]))}}(),function(){s.u=function(t){return"js/"+t+"."+{107:"0d3ccd28",123:"481e79f2",138:"7bc68c3b",153:"624d2911",162:"e39afc3b",186:"5ba346d8",190:"fc904062",298:"cb86db2f",367:"41239765",419:"9f7975b9",447:"5ff5f728",476:"102f1ed0",477:"a937bb9a",507:"c79eb528",522:"4e10f172",532:"0f89e84f",536:"a2e90bda",570:"45e11e6f",576:"c2c1a314",587:"12a97a18",606:"539b0ccf",643:"b13df521",669:"6a93a6bb",676:"ffae95a0",687:"bd73f423",701:"cc89dafd",746:"ae4864bf",795:"e0523284",819:"6c348554",834:"75434aba",894:"a0416478",912:"7b7c0935",933:"5d74c8b8",991:"9e4e78cd"}[t]+".js"}}(),function(){s.miniCssF=function(t){return"css/"+t+"."+{138:"2885ea22",186:"056fe167",367:"056fe167",507:"056fe167",522:"dcc061de",536:"323f8c0d",643:"323f8c0d"}[t]+".css"}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={},e="vuejs-spa:";s.l=function(n,o,r,i){if(t[n])t[n].push(o);else{var a,l;if(void 0!==r)for(var u=document.getElementsByTagName("script"),c=0;c<u.length;c++){var d=u[c];if(d.getAttribute("src")==n||d.getAttribute("data-webpack")==e+r){a=d;break}}a||(l=!0,a=document.createElement("script"),a.charset="utf-8",a.timeout=120,s.nc&&a.setAttribute("nonce",s.nc),a.setAttribute("data-webpack",e+r),a.src=n),t[n]=[o];var g=function(e,s){a.onerror=a.onload=null,clearTimeout(p);var o=t[n];if(delete t[n],a.parentNode&&a.parentNode.removeChild(a),o&&o.forEach((function(t){return t(s)})),e)return e(s)},p=setTimeout(g.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=g.bind(null,a.onerror),a.onload=g.bind(null,a.onload),l&&document.head.appendChild(a)}}}(),function(){s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){s.p="/vue.js-front-end/"}(),function(){if("undefined"!==typeof document){var t=function(t,e,s,n,o){var r=document.createElement("link");r.rel="stylesheet",r.type="text/css";var i=function(s){if(r.onerror=r.onload=null,"load"===s.type)n();else{var i=s&&("load"===s.type?"missing":s.type),a=s&&s.target&&s.target.href||e,l=new Error("Loading CSS chunk "+t+" failed.\n("+a+")");l.code="CSS_CHUNK_LOAD_FAILED",l.type=i,l.request=a,r.parentNode&&r.parentNode.removeChild(r),o(l)}};return r.onerror=r.onload=i,r.href=e,s?s.parentNode.insertBefore(r,s.nextSibling):document.head.appendChild(r),r},e=function(t,e){for(var s=document.getElementsByTagName("link"),n=0;n<s.length;n++){var o=s[n],r=o.getAttribute("data-href")||o.getAttribute("href");if("stylesheet"===o.rel&&(r===t||r===e))return o}var i=document.getElementsByTagName("style");for(n=0;n<i.length;n++){o=i[n],r=o.getAttribute("data-href");if(r===t||r===e)return o}},n=function(n){return new Promise((function(o,r){var i=s.miniCssF(n),a=s.p+i;if(e(i,a))return o();t(n,a,null,o,r)}))},o={143:0};s.f.miniCss=function(t,e){var s={138:1,186:1,367:1,507:1,522:1,536:1,643:1};o[t]?e.push(o[t]):0!==o[t]&&s[t]&&e.push(o[t]=n(t).then((function(){o[t]=0}),(function(e){throw delete o[t],e})))}}}(),function(){var t={143:0};s.f.j=function(e,n){var o=s.o(t,e)?t[e]:void 0;if(0!==o)if(o)n.push(o[2]);else{var r=new Promise((function(s,n){o=t[e]=[s,n]}));n.push(o[2]=r);var i=s.p+s.u(e),a=new Error,l=function(n){if(s.o(t,e)&&(o=t[e],0!==o&&(t[e]=void 0),o)){var r=n&&("load"===n.type?"missing":n.type),i=n&&n.target&&n.target.src;a.message="Loading chunk "+e+" failed.\n("+r+": "+i+")",a.name="ChunkLoadError",a.type=r,a.request=i,o[1](a)}};s.l(i,l,"chunk-"+e,e)}},s.O.j=function(e){return 0===t[e]};var e=function(e,n){var o,r,i=n[0],a=n[1],l=n[2],u=0;if(i.some((function(e){return 0!==t[e]}))){for(o in a)s.o(a,o)&&(s.m[o]=a[o]);if(l)var c=l(s)}for(e&&e(n);u<i.length;u++)r=i[u],s.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return s.O(c)},n=self["webpackChunkvuejs_spa"]=self["webpackChunkvuejs_spa"]||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))}();var n=s.O(void 0,[998],(function(){return s(8315)}));n=s.O(n)})();
//# sourceMappingURL=app.7a59e613.js.map