"use strict";(self["webpackChunkvuejs_spa"]=self["webpackChunkvuejs_spa"]||[]).push([[570],{4570:function(e,a,t){t.r(a),t.d(a,{default:function(){return w}});var r=t(3396),i=t(9242),l=t(7139);const s={class:"column gap-15 column-side"},n={class:"form-field"},o=(0,r._)("label",{for:"input_userEmail"},"Email",-1),m={key:0,class:"icon-text notification-error"},u=(0,r._)("span",{class:"bi bi-exclamation-circle-fill"},null,-1),c=(0,r._)("button",{type:"submit",class:"button button-secondary"},"Change email",-1),d=(0,r._)("div",{class:"column gap-5"},[(0,r._)("span",{class:"primary-text font-size-small"},"Password"),(0,r._)("button",{class:"button button-secondary"},"Send password-reset link to email")],-1);function h(e,a,t,h,p,g){return(0,r.wg)(),(0,r.iD)("div",s,[(0,r._)("form",{class:"column",onSubmit:a[1]||(a[1]=(0,i.iM)(((...e)=>g.changeEmail&&g.changeEmail(...e)),["prevent"]))},[(0,r._)("div",n,[o,(0,r.wy)((0,r._)("input",{id:"input_userEmail",type:"text",class:(0,l.C_)({"input-error":p.email.error}),placeholder:"Enter email","onUpdate:modelValue":a[0]||(a[0]=e=>p.email.data=e)},null,2),[[i.nr,p.email.data]]),p.email.error?((0,r.wg)(),(0,r.iD)("span",m,[u,(0,r._)("span",null,(0,l.zw)(p.email.error),1)])):(0,r.kq)("",!0)]),c],32),d,(0,r._)("button",{class:"button button-default toggled",style:{"margin-top":"90px"},onClick:a[2]||(a[2]=(...e)=>g.deleteAccount&&g.deleteAccount(...e))},"Delete account")])}var p=t(3278),g=t(7285),b={name:"AccountSettingsView",data(){return{email:{data:this.$store.getters.getCurrentUser.email,error:null}}},methods:{async changeEmail(){if(this.email.data=this.email.data||null,this.email.error=null,this.email.data?(this.email.data=this.email.data.trim().toLowerCase(),this.email.data.length>50?this.email.error="Enter an email that is up to 50 characters.":(0,g.u$)(this.email.data)||(this.email.error="Invalid email.")):this.email.error="Required field.",this.email.error)return;const e=await p.Z.put("me/credentials",{email:this.email.data});e.error&&e.error.message.emailError&&(this.email.error=e.error.message.emailError)},async deleteAccount(){await p.Z.delete("me");this.$store.dispatch("logOut")}}},f=t(89);const _=(0,f.Z)(b,[["render",h]]);var w=_}}]);
//# sourceMappingURL=570.3d44a86f.js.map